{"version":3,"sources":["Components/MySideNav.module.css","Components/MySideNav.jsx","Components/icons/box-arrow-in-down.svg","Components/icons/box-arrow-down.svg","Components/icons/brush.svg","Components/icons/eraser.svg","Components/icons/square.svg","Components/icons/triangle.svg","Components/icons/circle.svg","Components/icons/rotate.svg","Components/icons/crop.svg","Components/icons/arrow-counterclockwise.svg","Components/icons/undo.svg","Components/icons/arrow-clockwise.svg","Components/icons/asterisk.svg","Components/icons/bullseye.svg","Components/Modal/Modal.jsx","Components/MyCanvas.jsx","App.jsx","index.js","Components/MyCanvas.module.css"],"names":["module","exports","MySideNav","children","useState","isVisible","setVisible","className","classes","sideNav","Toggle","onClick","Nav","Modal","active","setActive","e","stopPropagation","MyCanvas","loadModalActive","setLoadModalActive","brushModalActive","setBrushModalActive","eraseModalActive","setEraseModalActive","cropModalActive","setCropModalActive","filterModalActive","setFilterModalActive","gaussModalActive","setGaussModalActive","drag","setDrag","rotateModalActive","setRotateModalActive","setOpenErase","setOpenBrush","brushVal","setBrushVal","eraseVal","setEraseVal","color","setColor","angleValue","setAngleValue","bs64","setBs64","filename","setName","setBgPath","gaussVal","setGaussVal","API_URL","window","addEventListener","ctxBg","document","getElementById","getContext","canvasFg","ctxFg","webkitImageSmoothingEnabled","msImageSmoothingEnabled","imageSmoothingEnabled","points","mouseX","mouseY","isDrawing","setMouseCoordinates","offsetX","offsetY","mouseDown","beginPath","moveTo","push","x","y","mode","picsCashe","casheMut","querySelector","value","mouseMove","lineTo","stroke","mouseUp","coord","removeListeners","globalCompositeOperation","removeEventListener","mouseTriCoordEvent","console","log","length","closePath","mouseRectCoordEvent","rectWidth","Math","abs","rectHeight","strokeRect","cropCoord","mouseRectCropEvent","qWidth","qHeight","qTop","qLeft","sendCrop","mouseCircleCoordEvent","radius","arc","PI","bg_path","fg_path","changable","bool_val","this","setCashe","values","getCache","rewriteCache","mutability","a","Fg","getImage","src","replace","Bg","firstRequestOptions","prepareRequestOptions","secondRequestOptions","fetch","then","response","json","catch","error","bgResult","fgResult","path","ev","file","target","files","name","getBase64","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","searchParams","myHeaders","Headers","append","urlencoded","URLSearchParams","forEach","el","method","headers","body","redirect","event","preventDefault","requestOptions","resizeCanvases","meta","width","height","loadImgToBgCv","bs64string","format","wdh","hgt","ctxSave","canvas","base64str","new_img","Image","drawImage","loadImgToFgCv","dragStartHandler","dragLeaveHandler","dataTransfer","rotateImage","angle","lt","tp","wd","hg","bgPath","fgPath","kf","Number","imageData","toDataURL","image","alt","iconLoad","canvasSave","canvasBg","img1","img2","ctx","link","createElement","setAttribute","click","saveImage","iconSave","id","iconBrush","iconEraser","iconRect","iconTri","iconCircle","iconRotate","iconCrop","iconGauss","iconFilter","action","onMouseOver","cnvs_bg","cnvs_fg","cnvs_save","type","onSubmit","encType","for","onChange","button","onDragStart","onDragLeave","onDragOver","onDrop","onDropHandler","angleInp","button_form","iconClockwise","iconCounterclock","min","max","brushInp","lineWidth","strokeStyle","eraseInp","gaussInp","gauss","step","App","ReactDOM","render","StrictMode"],"mappings":"sGACAA,EAAOC,QAAU,CAAC,QAAU,6B,uPCsBbC,EAlBU,SAAC,GAAgB,IAAfC,EAAc,EAAdA,SACzB,EAAgCC,oBAAS,GAAzC,mBAAOC,EAAP,KAAkBC,EAAlB,KAEE,OAEE,eAAC,IAAD,CAASC,UAAWC,IAAQC,QAA5B,UACE,cAAC,IAAQC,OAAT,CACEC,QAAS,WACPL,GAAYD,MAGhB,cAAC,IAAQO,IAAT,UACGT,QCjBI,MAA0B,8CCA1B,MAA0B,2CCA1B,MAA0B,kCCA1B,MAA0B,mCCA1B,MAA0B,mCCA1B,MAA0B,qCCA1B,MAA0B,mCCA1B,MAA0B,mCCA1B,MAA0B,iCCA1B,GCAA,IDAA,IAA0B,oDEA1B,MAA0B,4CCA1B,MAA0B,qCCA1B,MAA0B,qCCc1BU,G,MAXD,SAAC,GAAmC,IAAlCC,EAAiC,EAAjCA,OAAQC,EAAyB,EAAzBA,UAAWZ,EAAc,EAAdA,SAC/B,OACI,qBAAKI,UAAWO,EAAS,eAAiB,QAASH,QAAS,kBAAMI,GAAU,IAA5E,SACI,qBAAKR,UAAWO,EAAS,wBAA0B,iBAAkBH,QAAS,SAAAK,GAAC,OAAIA,EAAEC,mBAArF,SACCd,Q,eCkqCIe,EA/oCO,WACvB,MAA8Cd,oBAAS,GAAvD,mBAAOe,EAAP,KAAwBC,EAAxB,KACA,EAAgDhB,oBAAS,GAAzD,mBAAOiB,EAAP,KAAyBC,EAAzB,KACA,EAAgDlB,oBAAS,GAAzD,mBAAOmB,EAAP,KAAyBC,EAAzB,KACA,EAA8CpB,oBAAS,GAAvD,mBAAOqB,EAAP,KAAwBC,EAAxB,KACA,EAAkDtB,oBAAS,GAA3D,mBAAOuB,EAAP,KAA0BC,EAA1B,KACA,EAAgDxB,oBAAS,GAAzD,mBAAOyB,EAAP,KAAyBC,EAAzB,KACA,EAAwB1B,oBAAS,GAAjC,mBAAO2B,EAAP,KAAaC,EAAb,KACA,EAAkD5B,oBAAS,GAA3D,mBAAO6B,GAAP,KAA0BC,GAA1B,KACA,GAA8B9B,oBAAS,GAAvC,qBAAc+B,IAAd,aACA,GAA8B/B,oBAAS,GAAvC,qBAAcgC,IAAd,aACA,GAAgChC,mBAAS,IAAzC,qBAAOiC,GAAP,MAAiBC,GAAjB,MACA,GAAgClC,mBAAS,IAAzC,qBAAOmC,GAAP,MAAiBC,GAAjB,MACA,GAA0BpC,mBAAS,WAAnC,qBAAOqC,GAAP,MAAcC,GAAd,MACA,GAAoCtC,mBAAS,KAA7C,qBAAOuC,GAAP,MAAmBC,GAAnB,MACA,GAAwBxC,mBAAS,IAAjC,qBAAOyC,GAAP,MAAaC,GAAb,MACA,GAA4B1C,mBAAS,IAArC,qBAAO2C,GAAP,MAAiBC,GAAjB,MACA,GAA4B5C,mBAAS,IAArC,qBAAe6C,IAAf,aACA,GAA4B7C,mBAAS,IAArC,qBACA,IADA,YACgCA,mBAAS,IAAzC,qBAAO8C,GAAP,MAAiBC,GAAjB,MAEMC,GAAU,uCAGbC,OAAOC,iBAAiB,QAAQ,WAE5B,IACMC,EADWC,SAASC,eAAe,MAClBC,WAAW,MAC5BC,EAAWH,SAASC,eAAe,MACnCG,EAAQD,EAASD,WAAW,MACrBF,SAASC,eAAe,YAChBC,WAAW,MAiBtCH,EAAMM,6BAA8B,EACpCN,EAAMO,yBAA0B,EAChCP,EAAMQ,uBAAwB,EAE9B,IAAIC,EAAS,GAKTC,EAAS,EACTC,EAAS,EACTC,GAAY,EAEVC,EAAsB,SAACpD,GAC5BiD,EAASjD,EAAEqD,QACXH,EAASlD,EAAEsD,SAGNC,EAAY,SAACvD,GAClBoD,EAAoBpD,GACpBmD,GAAY,EACZP,EAAMY,YACNZ,EAAMa,OAAOR,EAAQC,GAErBF,EAAOU,KAAK,CACZC,EAAGV,EACHW,EAAGV,EACHW,KAAM,UAENC,GAAUC,UAAS,GACnBvB,SAASwB,cAAc,cAAcC,MAAQ,GAGxCC,EAAY,SAAClE,GAClBoD,EAAoBpD,GACjBmD,IACFP,EAAMuB,OAAOlB,EAAQC,GACrBN,EAAMwB,SACHpB,EAAOU,KAAK,CACdC,EAAGV,EACHW,EAAGV,EACHW,KAAM,UAGRC,GAAUC,UAAS,GACnBvB,SAASwB,cAAc,cAAcC,MAAQ,GAGxCI,EAAU,SAACrE,GAChBoD,EAAoBpD,GACpBmD,GAAY,EAEZH,EAAOU,KAAK,CACXC,EAAGV,EACHW,EAAGV,EACHW,KAAM,QAEPC,GAAUC,UAAS,GACnBvB,SAASwB,cAAc,cAAcC,MAAQ,GAU1CK,EAAQ,GAENC,EAAkB,WACvB3B,EAAM4B,yBAA2B,cACjC7B,EAAS8B,oBAAoB,YAAalB,GAC1CZ,EAAS8B,oBAAoB,YAAaP,GAC1CvB,EAAS8B,oBAAoB,UAAWJ,IAwBnCK,EAAqB,SAArBA,EAAsB1E,GAC3B2E,QAAQC,IAAIN,GACZlB,EAAoBpD,GACpBsE,EAAMZ,KAAK,CACVC,EAAGV,EACHW,EAAGV,IAGiB,IAAjBoB,EAAMO,SACT1B,GAAY,EACZP,EAAMY,YACNZ,EAAMa,OAAOa,EAAM,GAAN,EAAeA,EAAM,GAAN,GAC5B1B,EAAMuB,OAAOG,EAAM,GAAN,EAAeA,EAAM,GAAN,GAC5B1B,EAAMuB,OAAOG,EAAM,GAAN,EAAeA,EAAM,GAAN,GAC5B1B,EAAMkC,YACNlC,EAAMwB,SACNjB,GAAY,EACZR,EAAS8B,oBAAoB,QAAQC,GACrCJ,EAAMO,OAAS,GAGhBf,GAAUC,UAAS,GACnBvB,SAASwB,cAAc,cAAcC,MAAQ,GAGxCc,EAAsB,SAAtBA,EAAuB/E,GAQ5B,GAPA2E,QAAQC,IAAIN,GACZlB,EAAoBpD,GACpBsE,EAAMZ,KAAK,CACVC,EAAGV,EACHW,EAAGV,IAGiB,IAAjBoB,EAAMO,OAAc,CACvB1B,GAAY,EACZ,IAAM6B,EAAYC,KAAKC,IAAIZ,EAAM,GAAN,EAAgBA,EAAM,GAAN,GACrCa,EAAaF,KAAKC,IAAIZ,EAAM,GAAN,EAAiBA,EAAM,GAAN,GAC7C1B,EAAMwC,WAAWd,EAAM,GAAN,EAAcA,EAAM,GAAN,EAAcU,EAAUG,GACvDhC,GAAY,EACZR,EAAS8B,oBAAoB,QAAQM,GACrCT,EAAMO,OAAS,EAGhBf,GAAUC,UAAS,GACnBvB,SAASwB,cAAc,cAAcC,MAAQ,GAI1CoB,EAAY,GACVC,EAAqB,SAArBA,EAAsBtF,GAQ3B,GAPAoD,EAAoBpD,GACpBqF,EAAU3B,KAAK,CACdC,EAAGV,EACHW,EAAGV,IAIqB,IAArBmC,EAAUR,OAAc,CAI3B,IAAMU,EAASN,KAAKC,IAAIG,EAAU,GAAG1B,EAAI0B,EAAU,GAAG1B,GAChD6B,EAAUP,KAAKC,IAAIG,EAAU,GAAGzB,EAAIyB,EAAU,GAAGzB,GACjD6B,EAAOJ,EAAU,GAAGzB,EAAIyB,EAAU,GAAGzB,EAAIyB,EAAU,GAAGzB,EAAIyB,EAAU,GAAGzB,EACvE8B,EAAQL,EAAU,GAAG1B,EAAI0B,EAAU,GAAG1B,EAAI0B,EAAU,GAAG1B,EAAI0B,EAAU,GAAG1B,EAC9EgB,QAAQC,IAAIY,EAASD,EAAQG,EAAOD,GAEpC,KArN0B,2CAsNzBE,CAASD,EAAOD,EAAMF,EAAQC,GAE/B,SACCb,QAAQC,IAAI,eAMbS,EAAUR,OAAS,EACnBlC,EAAS8B,oBAAoB,QAAQa,GAEtCxB,GAAUC,UAAS,GACnBvB,SAASwB,cAAc,cAAcC,MAAQ,GAGxC2B,EAAwB,SAAxBA,EAAyB5F,GAQ9B,GAPA2E,QAAQC,IAAIN,GACZlB,EAAoBpD,GACpBsE,EAAMZ,KAAK,CACVC,EAAGV,EACHW,EAAGV,IAGiB,IAAjBoB,EAAMO,OAAc,CACvB1B,GAAY,EACZ,IAAM0C,EAASZ,KAAKC,IAAIZ,EAAM,GAAN,EAAiBA,EAAM,GAAN,GACzC1B,EAAMY,YACNZ,EAAMkD,IAAIxB,EAAM,GAAN,EAAcA,EAAM,GAAN,EAAcuB,EAAO,EAAG,EAAEZ,KAAKc,IAAI,GAC3DnD,EAAMkC,YACNlC,EAAMwB,SACNjB,GAAY,EACZR,EAAS8B,oBAAoB,QAAQmB,GACrCtB,EAAMO,OAAS,EAGhBf,GAAUC,UAAS,GACnBvB,SAASwB,cAAc,cAAcC,MAAQ,GAI1BzB,SAASC,eAAe,eAChCH,iBAAiB,SAlIR,WACpBiC,IACA5B,EAASL,iBAAiB,QAASoC,MAkIpBlC,SAASC,eAAe,WAChCH,iBAAiB,SAhIR,WAChBiC,IACA5B,EAASL,iBAAiB,QAASyC,MAgIlBvC,SAASC,eAAe,aAChCH,iBAAiB,SAzHR,WAClBiC,IACA5B,EAASL,iBAAiB,QAASsD,MAyHnBpD,SAASC,eAAe,cAChCH,iBAAiB,SA5JR,WACjBM,EAAM4B,yBAA2B,cAEjC7B,EAASL,iBAAiB,YAAaiB,GACvCZ,EAASL,iBAAiB,YAAa4B,GACvCvB,EAASL,iBAAiB,UAAW+B,MAyJtB7B,SAASC,eAAe,WAChCH,iBAAiB,SApIH,WACrBiC,IACA5B,EAASL,iBAAiB,QAASgD,MAqInB9C,SAASC,eAAe,YAChCH,iBAAiB,SAAS,WAElCK,EAASL,iBAAiB,YAAaiB,GACvCZ,EAASL,iBAAiB,YAAa4B,GACvCvB,EAASL,iBAAiB,UAAW+B,GACrCzB,EAAM4B,yBAA2B,wBAyDnC,IAAIV,GAAY,CACfkC,QAAS,KACTC,QAAS,KACTC,WAAW,EACXnC,SAAU,SAASoC,GAClBC,KAAKF,UAAYC,GAElBE,SAAU,SAASC,GAClBF,KAAKJ,QAAUM,EAAO,GACtBF,KAAKH,QAAUK,EAAO,IAEvBC,SAAU,WACT,MAAO,CAACH,KAAKJ,QAASI,KAAKH,UAE5BO,aAAa,WAAD,4BAAE,WAAeC,GAAf,yBAAAC,EAAA,0DACTN,KAAKF,UADI,wBAINS,EAAKC,GAASpE,SAASC,eAAe,OAC3CoE,IACAC,QAAQ,QAAS,IAAIA,QAAQ,OAAQ,IAChCC,EAAKH,GAASpE,SAASC,eAAe,OAC3CoE,IACAC,QAAQ,QAAS,IAAIA,QAAQ,OAAQ,IAEhCE,EAAsBC,GAAsB,CAAC,CAAC,cAAeF,KAC7DG,EAAuBD,GAAsB,CAAC,CAAC,cAAeN,KAZxD,SAcWQ,MAAM/E,GAAS4E,GACrCI,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BC,OAAM,SAAAC,GAAK,OAAI7C,QAAQC,IAAR,8BAhBJ,cAcN6C,EAdM,iBAkBWN,MAAM/E,GAAS8E,GACrCE,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BC,OAAM,SAAAC,GAAK,OAAI7C,QAAQC,IAAR,8BApBJ,QAkBN8C,EAlBM,OAsBZtB,KAAKC,SAAS,CAACoB,EAASE,KAAMD,EAASC,OACvCvB,KAAKrC,SAAS0C,GAvBF,wBA6BZ9B,QAAQC,IAAI,qBA7BA,iDAAF,mDAAC,IA5Ve,8CA+X7B,WAA4BgD,GAA5B,eAAAlB,EAAA,6DACC/B,QAAQC,IAAI,yBACNiD,EAAOD,EAAGE,OAAOC,MAAM,GAC7B/F,GAAQ6F,EAAKG,MAHd,KAIClG,GAJD,SAIemG,GAAUJ,GAJzB,8EA/X6B,sBAsY7B,IAAMI,GAAY,SAACJ,GAAD,OAAU,IAAIK,SAAQ,SAACC,EAASC,GACjD,IAAIC,EAAS,IAAIC,WACjBD,EAAOE,cAAcV,GACrBQ,EAAOG,OAAS,kBAAML,EAAQE,EAAOI,OAAO3B,QAAQ,QAAS,IAAIA,QAAQ,OAAQ,MACjFuB,EAAOK,QAAU,SAAClB,GAAD,OAAWY,EAAO,UAAWZ,QAGzCP,GAAwB,SAAC0B,GAC9B,IAAIC,EAAY,IAAIC,QACpBD,EAAUE,OAAO,eAAgB,qCACjC,IAAIC,EAAa,IAAIC,gBAErB,OADAL,EAAaM,SAAQ,SAAAC,GAAE,OAAIH,EAAWD,OAAOI,EAAG,GAAIA,EAAG,OAChD,CACNC,OAAQ,OACRC,QAASR,EACTS,KAAMN,EACNO,SAAU,WAtZiB,8CA0Z7B,WAA4BC,GAA5B,iBAAA7C,EAAA,6DACC6C,EAAMC,iBAEAC,EAAiBxC,GAAsB,CAAC,CAAC,cAAepF,IAAO,CAAC,aAAcE,MAHrF,SAIsBoF,MAAM/E,GAASqH,GACnCrC,MAAK,SAAAC,GAAQ,OACbA,EAASC,UAETC,OAAM,SAAAC,GAAK,OAAI7C,QAAQC,IAAR,wBAA6B4C,OAR9C,cAIOiB,EAJP,gBASOiB,GAAejB,EAAOkB,KAAKC,MAAOnB,EAAOkB,KAAKE,QAAQzC,MAAK,SAAAzD,GAAC,OAAEgB,QAAQC,IAAIjB,MATjF,uBAUOmG,GAAcrB,EAAOsB,WAAYtB,EAAOkB,KAAKC,MAAOnB,EAAOkB,KAAKE,OAAQpB,EAAOkB,KAAKK,QACzF5C,MAAK,SAACzD,GAAD,OAAKgB,QAAQC,IAAIjB,MAXxB,OAYC1B,GAAUwG,EAAOd,MAEjBvH,GAAmB,GAEnB0D,GAAUC,UAAS,GAhBpB,6CA1Z6B,sBA8a7B,IAAM2F,GAAiB,SAACO,EAAKC,GAAN,OAAc,IAAIhC,SAAQ,SAACC,EAASC,GAC1D,IAAM7F,EAAQC,SAASC,eAAe,MAAMC,WAAW,MACjDE,EAAQJ,SAASC,eAAe,MAAMC,WAAW,MACjDyH,EAAU3H,SAASC,eAAe,YAAYC,WAAW,MAC/DH,EAAM6H,OAAOR,MAASK,EACtB1H,EAAM6H,OAAOP,OAASK,EACtBtH,EAAMwH,OAAOR,MAASK,EACtBrH,EAAMwH,OAAOP,OAASK,EACtBC,EAAQC,OAAOR,MAASK,EACxBE,EAAQC,OAAOP,OAASK,EACxB/B,EAAQ,oBACRC,EAAO,4CAIF0B,GAAgB,SAACO,EAAWJ,EAAKC,EAAKF,GAAtB,OAAiC,IAAI9B,SAAQ,SAACC,EAASC,GAC5E,IAAMkC,EAAU,IAAIC,MACpBD,EAAQzD,IAAR,qBAA4BmD,EAA5B,mBAA6CK,GAC7CC,EAAQV,MAAQK,EAChBK,EAAQT,OAASK,EACjBvF,QAAQC,IAAI,iBACZD,QAAQC,IAAI0F,GACZ,IACY/H,EADKC,SAASC,eAAe,MACZC,WAAW,MACxC4H,EAAQ9B,OAAS,WAChBjG,EAAMiI,UAAUF,EAAS,EAAG,GAC5BnC,EAAQ,gCACRC,EAAO,6BAIHqC,GAAgB,SAACJ,EAAWJ,EAAKC,EAAKF,GAAtB,OAAiC,IAAI9B,SAAQ,SAACC,EAASC,GAC5E,IAAMkC,EAAU,IAAIC,MACpBD,EAAQzD,IAAR,qBAA4BmD,EAA5B,mBAA6CK,GAC7CC,EAAQV,MAAQK,EAChBK,EAAQT,OAASK,EACjBvF,QAAQC,IAAI,iBACZD,QAAQC,IAAI0F,GACN,IACM1H,EADWJ,SAASC,eAAe,MAClBC,WAAW,MACxC4H,EAAQ9B,OAAS,WAChB5F,EAAM4H,UAAUF,EAAS,EAAG,GAC5BnC,EAAQ,gCACRC,EAAO,6BAKT,SAASsC,GAAiB1K,GACtBA,EAAEwJ,iBACFxI,GAAQ,GAGV,SAAS2J,GAAiB3K,GACxBA,EAAEwJ,iBACFxI,GAAQ,GAreiB,8CAwe3B,WAA6BhB,GAA7B,mBAAA0G,EAAA,6DACE1G,EAAEwJ,iBAELxI,GAAQ,GACF6G,EAAO7H,EAAE4K,aAAa7C,MAAM,GAClCpD,QAAQC,IAAIiD,GALX,KAMyBZ,GANzB,SAMsEgB,GAAUJ,GANhF,gCAMiD,cANjD,WAMwF,CAAC,aAAcA,EAAKG,MAN5G,iBAMQyB,GANR,wBAOoBtC,MAAM/E,GAASqH,GACnCrC,MAAK,SAAAC,GAAQ,OACbA,EAASC,UAETC,OAAM,SAAAC,GAAK,OAAI7C,QAAQC,IAAR,wBAA6B4C,OAX5C,eAOKiB,EAPL,iBAYKiB,GAAejB,EAAOkB,KAAKC,MAAOnB,EAAOkB,KAAKE,QAAQzC,MAAK,SAAAzD,GAAC,OAAEgB,QAAQC,IAAIjB,MAZ/E,yBAaKmG,GAAcrB,EAAOsB,WAAYtB,EAAOkB,KAAKC,MAAOnB,EAAOkB,KAAKE,OAAQpB,EAAOkB,KAAKK,QACzF5C,MAAK,SAACzD,GAAD,OAAKgB,QAAQC,IAAIjB,MAdtB,QAeD1B,GAAUwG,EAAOd,MACjBvH,GAAmB,GAEnB0D,GAAUC,UAAS,GAlBlB,6CAxe2B,+BAmgBd8G,GAngBc,iFAmgB7B,WAA2BC,GAA3B,yBAAApE,EAAA,6DACOC,EAAKC,GAASpE,SAASC,eAAe,OAC3CoE,IACAC,QAAQ,QAAS,IAAIA,QAAQ,OAAQ,IAChCC,EAAKH,GAASpE,SAASC,eAAe,OAC3CoE,IACAC,QAAQ,QAAS,IAAIA,QAAQ,OAAQ,IAEhCE,EAAsBC,GAAsB,CACjD,CAAC,cAAeF,GAChB,CAAC,aAAchF,IACf,CAAC,QAAS+I,KAGL5D,EAAuBD,GAAsB,CAClD,CAAC,cAAeN,GAChB,CAAC,aAAc5E,IACf,CAAC,QAAS+I,KAjBZ,SAoBwB3D,MAAM/E,GAAU,SAAU4E,GAChDI,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAE1BC,OAAM,SAAAC,GAAK,OAAI7C,QAAQC,IAAR,0CAvBjB,cAoBO6C,EApBP,gBAwBOiC,GAAejC,EAASkC,KAAKC,MAAOnC,EAASkC,KAAKE,QAAQzC,MAAK,SAACzD,GAAD,OAAKgB,QAAQC,IAAIjB,MAxBvF,wBAyBOmG,GAAcrC,EAASsC,WAAYtC,EAASkC,KAAKC,MAAOnC,EAASkC,KAAKE,OAAQpC,EAASkC,KAAKK,QACjG5C,MAAK,SAACzD,GAAD,OAAKgB,QAAQC,IAAIjB,MA1BxB,yBA6BwBwD,MAAM/E,GAAU,SAAU8E,GAChDE,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BC,OAAM,SAAAC,GAAK,OAAI7C,QAAQC,IAAR,0CA/BjB,eA6BO8C,EA7BP,iBAgCO+C,GAAc/C,EAASqC,WAAYrC,EAASiC,KAAKC,MAAOlC,EAASiC,KAAKE,OAAQnC,EAASiC,KAAKK,QACjG5C,MAAK,SAACzD,GAAD,OAAKgB,QAAQC,IAAIjB,MAjCxB,QAoCCnB,SAASwB,cAAc,cAAcC,MAAQ,EAC7CH,GAAUC,UAAS,GArCpB,6CAngB6B,oEAmkB7B,WAAwBgH,EAAIC,EAAIC,EAAIC,GAApC,yBAAAxE,EAAA,6DACOC,EAAKC,GAASpE,SAASC,eAAe,OAC3CoE,IACAC,QAAQ,QAAS,IAAIA,QAAQ,OAAQ,IAChCC,EAAKH,GAASpE,SAASC,eAAe,OAC3CoE,IACAC,QAAQ,QAAS,IAAIA,QAAQ,OAAQ,IAEhCE,EAAsBC,GAAsB,CACjD,CAAC,cAAeF,GAChB,CAAC,aAAchF,IACf,CAAC,OAAQgJ,GACT,CAAC,MAAOC,GACR,CAAC,QAASC,GACV,CAAC,SAAUC,KAGNhE,EAAuBD,GAAsB,CAClD,CAAC,cAAeN,GAChB,CAAC,aAAc5E,IACf,CAAC,OAAQgJ,GACT,CAAC,MAAOC,GACR,CAAC,QAASC,GACV,CAAC,SAAUC,KAvBb,SA0BwB/D,MAAM/E,GAAU,OAAQ4E,GAC9CI,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BC,OAAM,SAAAC,GAAK,OAAI7C,QAAQC,IAAR,0CA5BjB,cA0BO6C,EA1BP,gBA6BOiC,GAAejC,EAASkC,KAAKC,MAAOnC,EAASkC,KAAKE,QAAQzC,MAAK,SAACzD,GAAD,OAAKgB,QAAQC,IAAIjB,MA7BvF,wBA8BOmG,GAAcrC,EAASsC,WAAYtC,EAASkC,KAAKC,MAAOnC,EAASkC,KAAKE,OAAQpC,EAASkC,KAAKK,QACjG5C,MAAK,SAACzD,GAAD,OAAKgB,QAAQC,IAAIjB,MA/BxB,yBAkCwBwD,MAAM/E,GAAU,OAAQ8E,GAC9CE,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BC,OAAM,SAAAC,GAAK,OAAI7C,QAAQC,IAAR,0CApCjB,eAkCO8C,EAlCP,iBAqCO+C,GAAc/C,EAASqC,WAAYrC,EAASiC,KAAKC,MAAOlC,EAASiC,KAAKE,OAAQnC,EAASiC,KAAKK,QACjG5C,MAAK,SAACzD,GAAD,OAAKgB,QAAQC,IAAIjB,MAtCxB,6CAnkB6B,oEA6mB7B,wCAAA+C,EAAA,sEACO5C,GAAU0C,cAAa,GAD9B,gBAE0B1C,GAAUyC,WAFpC,mBAEQ4E,EAFR,KAEgBC,EAFhB,KAGOC,EAAKC,OAAO9I,SAASwB,cAAc,cAAcC,OAAS,EAHjE,SAKwBkD,MAAM,GAAD,OAAI/E,GAAJ,uBAA0B+I,EAA1B,eAAuCE,GAAM,CAAClC,OAAQ,QACjF/B,MAAK,SAAAzD,GAAC,OAAEA,EAAE2D,UANZ,cAKOG,EALP,gBAOOiC,GAAejC,EAASkC,KAAKC,MAAOnC,EAASkC,KAAKE,QAAQzC,MAAK,SAACzD,GAAD,OAAKgB,QAAQC,IAAIjB,MAPvF,wBAQOmG,GAAcrC,EAASsC,WAAYtC,EAASkC,KAAKC,MAAOnC,EAASkC,KAAKE,OAAQpC,EAASkC,KAAKK,QACjG5C,MAAK,SAACzD,GAAD,OAAKgB,QAAQC,IAAIjB,MATxB,yBAYwBwD,MAAM,GAAD,OAAI/E,GAAJ,uBAA0BgJ,EAA1B,eAAuCC,GAAM,CAAClC,OAAQ,QACjF/B,MAAK,SAAAzD,GAAC,OAAEA,EAAE2D,UAbZ,eAYOI,EAZP,iBAcO+C,GAAc/C,EAASqC,WAAYrC,EAASiC,KAAKC,MAAOlC,EAASiC,KAAKE,OAAQnC,EAASiC,KAAKK,QACjG5C,MAAK,SAACzD,GAAD,OAAKgB,QAAQC,IAAIjB,MAfxB,4CA7mB6B,uEAgoB7B,WAAqB0H,GAArB,yBAAA3E,EAAA,6DACOC,EAAKC,GAASpE,SAASC,eAAe,OAC3CoE,IACAC,QAAQ,QAAS,IAAIA,QAAQ,OAAQ,IAChCC,EAAKH,GAASpE,SAASC,eAAe,OAC3CoE,IACAC,QAAQ,QAAS,IAAIA,QAAQ,OAAQ,IAEhCE,EAAsBC,GAAsB,CACjD,CAAC,cAAeF,GAChB,CAAC,aAAchF,IACf,CAAC,QAASsJ,KAGLnE,EAAuBD,GAAsB,CAClD,CAAC,cAAeN,GAChB,CAAC,aAAc5E,IACf,CAAC,QAASsJ,KAEX1G,QAAQC,IAAIxC,GAAU,QAAS4E,GAnBhC,SAoBwBG,MAAM/E,GAAU,QAAS4E,GAC/CI,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UArB5B,cAoBOG,EApBP,iBAuBOiC,GAAejC,EAASkC,KAAKC,MAAOnC,EAASkC,KAAKE,QAAQzC,MAAK,SAACzD,GAAD,OAAKgB,QAAQC,IAAIjB,MAvBvF,yBAwBOmG,GAAcrC,EAASsC,WAAYtC,EAASkC,KAAKC,MAAOnC,EAASkC,KAAKE,OAAQpC,EAASkC,KAAKK,QACjG5C,MAAK,SAACzD,GAAD,OAAKgB,QAAQC,IAAIjB,MAzBxB,yBA4BwBwD,MAAM/E,GAAU,QAAS8E,GAC/CE,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BC,OAAM,SAAAC,GAAK,OAAI7C,QAAQC,IAAR,0CA9BjB,eA4BO8C,EA5BP,iBA+BO+C,GAAc/C,EAASqC,WAAYrC,EAASiC,KAAKC,MAAOlC,EAASiC,KAAKE,OAAQnC,EAASiC,KAAKK,QACjG5C,MAAK,SAACzD,GAAD,OAAKgB,QAAQC,IAAIjB,MAhCxB,QAmCCnB,SAASwB,cAAc,cAAcC,MAAQ,EAC7CH,GAAUC,UAAS,GApCpB,6CAhoB6B,oEAwqB7B,sCAAA2C,EAAA,6DACOC,EAAKC,GAASpE,SAASC,eAAe,OAC3CoE,IACAC,QAAQ,QAAS,IAAIA,QAAQ,OAAQ,IAChCC,EAAKH,GAASpE,SAASC,eAAe,OAC3CoE,IACAC,QAAQ,QAAS,IAAIA,QAAQ,OAAQ,IAEhCE,EAAsBC,GAAsB,CACjD,CAAC,cAAeF,GAChB,CAAC,aAAchF,MAGVmF,EAAuBD,GAAsB,CAClD,CAAC,cAAeN,GAChB,CAAC,aAAc5E,MAfjB,SAkBwBoF,MAAM/E,GAAU,oBAAqB4E,GAC3DI,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAnB5B,cAkBOG,EAlBP,gBAqBOiC,GAAejC,EAASkC,KAAKC,MAAOnC,EAASkC,KAAKE,QAAQzC,MAAK,SAACzD,GAAD,OAAKgB,QAAQC,IAAIjB,MArBvF,wBAsBOmG,GAAcrC,EAASsC,WAAYtC,EAASkC,KAAKC,MAAOnC,EAASkC,KAAKE,OAAQpC,EAASkC,KAAKK,QACjG5C,MAAK,SAACzD,GAAD,OAAKgB,QAAQC,IAAIjB,MAvBxB,yBA0BwBwD,MAAM/E,GAAU,oBAAqB8E,GAC3DE,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BC,OAAM,SAAAC,GAAK,OAAI7C,QAAQC,IAAR,0CA5BjB,eA0BO8C,EA1BP,iBA6BO+C,GAAc/C,EAASqC,WAAYrC,EAASiC,KAAKC,MAAOlC,EAASiC,KAAKE,OAAQnC,EAASiC,KAAKK,QACjG5C,MAAK,SAACzD,GAAD,OAAKgB,QAAQC,IAAIjB,MA9BxB,QAiCCnB,SAASwB,cAAc,cAAcC,MAAQ,EAC7CH,GAAUC,UAAS,GAlCpB,6CAxqB6B,oEA6sB7B,sCAAA2C,EAAA,6DACOC,EAAKC,GAASpE,SAASC,eAAe,OAC3CoE,IACAC,QAAQ,QAAS,IAAIA,QAAQ,OAAQ,IAChCC,EAAKH,GAASpE,SAASC,eAAe,OAC3CoE,IACAC,QAAQ,QAAS,IAAIA,QAAQ,OAAQ,IAEhCE,EAAsBC,GAAsB,CACjD,CAAC,cAAeF,GAChB,CAAC,aAAchF,MAGVmF,EAAuBD,GAAsB,CAClD,CAAC,cAAeN,GAChB,CAAC,aAAc5E,MAfjB,SAkBwBoF,MAAM/E,GAAU,iBAAkB4E,GACxDI,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAnB5B,cAkBOG,EAlBP,gBAqBOiC,GAAejC,EAASkC,KAAKC,MAAOnC,EAASkC,KAAKE,QAAQzC,MAAK,SAACzD,GAAD,OAAKgB,QAAQC,IAAIjB,MArBvF,wBAsBOmG,GAAcrC,EAASsC,WAAYtC,EAASkC,KAAKC,MAAOnC,EAASkC,KAAKE,OAAQpC,EAASkC,KAAKK,QACjG5C,MAAK,SAACzD,GAAD,OAAKgB,QAAQC,IAAIjB,MAvBxB,yBA0BwBwD,MAAM/E,GAAU,iBAAkB8E,GACxDE,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BC,OAAM,SAAAC,GAAK,OAAI7C,QAAQC,IAAR,0CA5BjB,eA0BO8C,EA1BP,iBA6BO+C,GAAc/C,EAASqC,WAAYrC,EAASiC,KAAKC,MAAOlC,EAASiC,KAAKE,OAAQnC,EAASiC,KAAKK,QACjG5C,MAAK,SAACzD,GAAD,OAAKgB,QAAQC,IAAIjB,MA9BxB,QAiCCnB,SAASwB,cAAc,cAAcC,MAAQ,EAC7CH,GAAUC,UAAS,GAlCpB,6CA7sB6B,sBAw3B7B,IAAM6C,GAAW,SAAAwD,GACb,IAAImB,EAAYnB,EAAOoB,YACnBC,EAAQ,IAAIlB,MAGhB,OAFAkB,EAAM5E,IAAM0E,EAELE,GA8DR,OACI,gCACL,eAAC,EAAD,WAOS,eAAC,UAAD,CAASlM,UAAU,UAAUI,QAAW,kBAAMS,GAAmB,IAAjE,UACE,cAAC,UAAD,UAAS,qBAAKb,UAAU,QAAQmM,IAAI,QAAQ7E,IAAK8E,MAC1D,cAAC,UAAD,wEAGD,eAAC,UAAD,CAAShM,QAhCO,WAClB,IAAMiM,EAAapJ,SAASC,eAAe,YACrCE,EAAWH,SAASC,eAAe,MACnCoJ,EAAWrJ,SAASC,eAAe,MACnCqJ,EAAOlF,GAASiF,GAChBE,EAAOnF,GAASjE,GAChBqJ,EAAMJ,EAAWlJ,WAAW,MAClCoJ,EAAKtD,OAAS,WACbwD,EAAIxB,UAAUsB,EAAK,EAAE,GACrBC,EAAKvD,OAAS,WACXwD,EAAIxB,UAAUuB,EAAK,EAAE,GAtBR,SAACN,GAClB,IAAIQ,EAAOzJ,SAAS0J,cAAc,KAClCD,EAAKE,aAAa,OAAQV,EAAM5E,KAChCoF,EAAKE,aAAa,WAAY,eAC9BF,EAAKG,QAoBDC,CADWzF,GAASgF,OAqBtB,UACC,cAAC,UAAD,UAAS,qBAAKF,IAAI,OAAO7E,IAAKyF,MAC9B,cAAC,UAAD,wEAGQ,eAAC,UAAD,CAAS/M,UAAU,UAAUgN,GAAG,aAAc5M,QAAW,kBAAMW,GAAoB,IAAnF,UACR,cAAC,UAAD,UAAS,qBAAKoL,IAAI,QAAQ7E,IAAK2F,MAC/B,cAAC,UAAD,gDAED,eAAC,UAAD,CAASjN,UAAU,UAAUgN,GAAG,WAAW5M,QAAW,kBAAMa,GAAoB,IAAhF,UACC,cAAC,UAAD,UAAS,qBAAKkL,IAAI,SAAS7E,IAAK4F,MAChC,cAAC,UAAD,sDAGD,eAAC,UAAD,CAASlN,UAAU,UAAUgN,GAAG,UAAhC,UACU,cAAC,UAAD,UAAS,qBAAKhN,UAAU,QAAQmM,IAAI,OAAO7E,IAAK6F,MACzD,cAAC,UAAD,gGAGD,eAAC,UAAD,CAASnN,UAAU,UAAUgN,GAAG,cAAhC,UACU,cAAC,UAAD,UAAS,qBAAKhN,UAAU,QAAQmM,IAAI,WAAW7E,IAAK8F,MAC7D,cAAC,UAAD,oFAGD,eAAC,UAAD,CAASpN,UAAU,UAAUgN,GAAG,YAAhC,UACU,cAAC,UAAD,UAAS,qBAAKhN,UAAU,QAAQmM,IAAI,SAAS7E,IAAK+F,MAC3D,cAAC,UAAD,0CAGD,eAAC,UAAD,CAASrN,UAAU,UAAUgN,GAAG,YAAY5M,QAAW,kBAAMuB,IAAqB,IAAlF,UACU,cAAC,UAAD,UAAS,qBAAK3B,UAAU,QAAQmM,IAAI,SAAS7E,IAAKgG,MAC3D,cAAC,UAAD,4DAGD,eAAC,UAAD,CAAStN,UAAU,UAAUgN,GAAG,UAAhC,UACU,cAAC,UAAD,UAAS,qBAAKhN,UAAU,QAAQmM,IAAI,OAAO7E,IAAKiG,MACzD,cAAC,UAAD,4DAED,eAAC,UAAD,CAASvN,UAAU,UAAUgN,GAAG,WAAW5M,QAAW,kBAAMmB,GAAoB,IAAhF,UACU,cAAC,UAAD,UAAS,qBAAKvB,UAAU,QAAQmM,IAAI,QAAQ7E,IAAKkG,MAC1D,cAAC,UAAD,oHAED,eAAC,UAAD,CAASxN,UAAU,UAAUgN,GAAG,YAAY5M,QAAW,kBAAMiB,GAAqB,IAAlF,UACU,cAAC,UAAD,UAAS,qBAAKrB,UAAU,QAAQmM,IAAI,SAAS7E,IAAKmG,MAC3D,cAAC,UAAD,+DAIO,sBAAMT,GAAG,OAAOU,OAAO,GAAG9D,OAAO,OAAjC,SACC,sBAAK5J,UAAU,eAAgB2N,YAAe,WAAO9L,IAAa,GAAQD,IAAa,IAAvF,UACC,wBAAQoL,GAAG,KAAKhN,UAAWC,IAAQ2N,UAC5C,wBAAQZ,GAAG,KAAKhN,UAAWC,IAAQ4N,UACnC,wBAAQb,GAAG,WAAWhN,UAAWC,IAAQ6N,YAChC,uBAAOd,GAAG,aAAae,KAAK,SAAStF,KAAK,aAAa/D,MAAM,UAGxE,eAAC,EAAD,CAAOnE,OAAQK,EAAiBJ,UAAWK,EAA3C,UACS,cAAC,IAAD,CAAMmN,SAlgCY,6CAkgCYC,QAAQ,sBAAsBrE,OAAO,OAAnE,SACE,eAAC,IAAD,WACG,cAAC,IAAD,CAAOsE,IAAI,WAAX,6FAGA,cAAC,IAAD,CACElB,GAAG,WACHe,KAAK,OACjBI,SA1gCuB,+CA4gCxB,cAAC,IAAD,CAAQnO,UAAWC,IAAQmO,OAA3B,yEAKM,qBAAKpO,UAAU,eAAf,gCACKwB,EACC,qBAAKxB,UAAU,YACdqO,YAAa,SAAA5N,GAAC,OAAI0K,GAAiB1K,IACnC6N,YAAa,SAAA7N,GAAC,OAAI2K,GAAiB3K,IACnC8N,WAAY,SAAA9N,GAAC,OAAI0K,GAAiB1K,IAClC+N,OAAQ,SAAA/N,GAAC,OAvhCE,4CAuhCEgO,CAAchO,IAJ5B,6FAMA,qBAAKT,UAAU,YACdqO,YAAa,SAAA5N,GAAC,OAAI0K,GAAiB1K,IACnC6N,YAAa,SAAA7N,GAAC,OAAI2K,GAAiB3K,IACnC8N,WAAY,SAAA9N,GAAC,OAAI0K,GAAiB1K,IAHnC,+HAQf,cAAC,EAAD,CAAOF,OAAQmB,GAAmBlB,UAAWmB,GAA7C,SACC,eAAC,IAAD,WACC,eAAC,IAAD,WACC,cAAC,IAAD,CAAOuM,IAAI,QAAX,kIACA,cAAC,IAAD,CACClB,GAAG,QACHvE,KAAK,QACLsF,KAAK,OACLI,SAjJc,WACnB,IAAMO,EAAWzL,SAASC,eAAe,SACzCb,GAAcqM,EAAShK,QAgJlBA,MAAOtC,QAGT,cAAC,IAAD,CAAQpC,UAAWC,IAAQ0O,YAAavO,QAAS,kBAAIkL,GAAYlJ,KAAjE,0BAEA,eAAC,IAAD,WACA,cAAC,IAAD,CAAQ2L,KAAK,SAAS/N,UAAWC,IAAQmO,OAAQhO,QAAS,kBAAIkL,GAAY,OAA1E,SAAiF,qBAAKhE,IAAKsH,EAAgB5B,GAAG,YAAYb,IAAI,oBAA2B,uBACzJ,cAAC,IAAD,CAAQ4B,KAAK,SAAS/N,UAAWC,IAAQmO,OAAQhO,QAAS,kBAAIkL,GAAY,QAA1E,SAAkF,qBAAKhE,IAAKuH,EAAmB1C,IAAI,4BAIrH,eAAC,EAAD,CAAO5L,OAAQO,EAAkBN,UAAWO,EAA5C,UACC,uEACA,cAAC,IAAD,CACMiM,GAAG,YACHe,KAAK,QACVe,IAAI,IACJC,IAAI,MACJZ,SA3LoB,WACvB,IACM9K,EADWJ,SAASC,eAAe,MAClBC,WAAW,MAC5B6L,EAAW/L,SAASC,eAAe,aACzCnB,GAAYiN,EAAStK,OACrBrB,EAAM4L,UAAYnN,IAuLf4C,MAAO5C,KAGR,2DACA,cAAC,IAAD,CAAgBI,MAAOA,GAAOiM,SAAUhM,KACxC,cAAC,IAAD,CAAQnC,UAAWC,IAAQmO,OAAQhO,QAhLb,WACP6C,SAASC,eAAe,MAClBC,WAAW,MAC5B+L,YAAchN,IA6KlB,0FAED,eAAC,EAAD,CAAO3B,OAAQS,EAAkBR,UAAWS,EAA5C,UACC,uEACA,cAAC,IAAD,CACM+L,GAAG,YACHe,KAAK,QACVe,IAAI,IACJC,IAAI,MACJZ,SAlMoB,WACvB,IACM9K,EADWJ,SAASC,eAAe,MAClBC,WAAW,MAC5BgM,EAAWlM,SAASC,eAAe,aACzCjB,GAAYkN,EAASzK,OACrBrB,EAAM4L,UAAYjN,IA8Lf0C,MAAO1C,QAGT,cAAC,EAAD,CAAOzB,OAAQW,EAAiBV,UAAWW,EAA3C,SACC,eAAC,IAAD,WACC,cAAC,IAAD,UACC,cAAC,IAAD,CACC6L,GAAG,OACHe,KAAK,WAGP,cAAC,IAAD,UAAW,cAAC,IAAD,CACTf,GAAG,OACHe,KAAK,WAGN,cAAC,IAAD,UAAW,cAAC,IAAD,CACVf,GAAG,OACHe,KAAK,WAGN,cAAC,IAAD,UACA,cAAC,IAAD,CACCf,GAAG,OACHe,KAAK,WAGP,cAAC,IAAD,CAAQA,KAAK,SAAS/N,UAAWC,IAAQmO,OAAzC,mEAIF,cAAC,EAAD,CAAO7N,OAAQe,EAAkBd,UAAWe,EAA5C,SACC,eAAC,IAAD,WACC,eAAC,IAAD,WACC,cAAC,IAAD,CAAO2M,IAAI,QAAX,gHACA,cAAC,IAAD,CACClB,GAAG,QACHvE,KAAK,QACLsF,KAAK,OACLI,SA9MgB,WACrB,IAAMiB,EAAWnM,SAASwB,cAAc,UACxC7B,GAAYwM,EAAS1K,QA6MhBA,MAAO/B,QAGT,cAAC,IAAD,CAAQoL,KAAK,SAAS/N,UAAWC,IAAQmO,OAAQhO,QAAS,kBAvnCjC,4CAunCuCiP,CAAM1M,KAAtE,+BAGF,eAAC,EAAD,CAAOpC,OAAQa,EAAmBZ,UAAWa,EAA7C,UACC,cAAC,IAAD,CAAQ0M,KAAK,SAAS/N,UAAWC,IAAQmO,OAAQhO,QA3nCvB,4CA2nC1B,wDACA,cAAC,IAAD,CAAQ2N,KAAK,SAAS/N,UAAWC,IAAQmO,OAAQhO,QA5nCvB,4CA4nC1B,2EACA,cAAC,IAAD,CAAQ2N,KAAK,SAAS/N,UAAWC,IAAQmO,OAAzC,+CAED,sBAAKpB,GAAG,SAAR,UACA,6EACA,cAAC,IAAD,CACOA,GAAG,YACHe,KAAK,QACVe,IAAI,IACJC,IAAI,IACJO,KAAK,MACLnB,SAvoCyB,qDCwBfoB,EA3CH,WAEV,OACI,qBAAKvP,UAAY,MAAjB,SAmCE,cAAC,EAAD,OCxCRwP,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFzM,SAASC,eAAe,U,kBCR1BzD,EAAOC,QAAU,CAAC,QAAU,0BAA0B,QAAU,0BAA0B,UAAY,4BAA4B,OAAS,yBAAyB,YAAc,8BAA8B,UAAY,+B","file":"static/js/main.dcd31019.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"sideNav\":\"MySideNav_sideNav__1FFRD\"};","import \"@trendmicro/react-sidenav/dist/react-sidenav.css\";\nimport React, { useState } from 'react';\nimport classes from './MySideNav.module.css';\nimport SideNav from \"@trendmicro/react-sidenav\";\n\nexport const MySideNav = ({children}) => {\n  const [isVisible, setVisible] = useState(true);\n\n    return (\n      \n      <SideNav className={classes.sideNav}>\n        <SideNav.Toggle\n          onClick={() => {\n            setVisible(!isVisible);\n          }}\n        />\n        <SideNav.Nav>\n          {children}\n        </SideNav.Nav>\n      </SideNav>\n    );\n}\n\nexport default MySideNav;","export default __webpack_public_path__ + \"static/media/box-arrow-in-down.4d5ac51f.svg\";","export default __webpack_public_path__ + \"static/media/box-arrow-down.8303b01f.svg\";","export default __webpack_public_path__ + \"static/media/brush.7071756d.svg\";","export default __webpack_public_path__ + \"static/media/eraser.4f781844.svg\";","export default __webpack_public_path__ + \"static/media/square.469d3ad2.svg\";","export default __webpack_public_path__ + \"static/media/triangle.ddb6eff2.svg\";","export default __webpack_public_path__ + \"static/media/circle.ae80814a.svg\";","export default __webpack_public_path__ + \"static/media/rotate.6914f04b.svg\";","export default __webpack_public_path__ + \"static/media/crop.522302f3.svg\";","export default __webpack_public_path__ + \"static/media/arrow-counterclockwise.48745dc8.svg\";","export default __webpack_public_path__ + \"static/media/undo.33141933.svg\";","export default __webpack_public_path__ + \"static/media/arrow-clockwise.2ba77545.svg\";","export default __webpack_public_path__ + \"static/media/asterisk.dce0ba3a.svg\";","export default __webpack_public_path__ + \"static/media/bullseye.56bf8b4b.svg\";","import React from 'react'\nimport \"./modal.css\";\n\nconst Modal = ({active, setActive, children}) => {\n    return (\n        <div className={active ? \"modal active\" : \"modal\"} onClick={() => setActive(false)}>\n            <div className={active ? \"modal__content active\" : \"modal__content\"} onClick={e => e.stopPropagation()}>\n            {children}\n            </div>\n            \n        </div>\n    );\n};\n\nexport default Modal\n","import classes from './MyCanvas.module.css';\nimport MySideNav from './MySideNav';\nimport { NavItem, NavIcon, NavText } from \"@trendmicro/react-sidenav\";\nimport iconLoad from './icons/box-arrow-in-down.svg';\nimport iconSave from './icons/box-arrow-down.svg';\nimport iconBrush from './icons/brush.svg';\nimport iconEraser from './icons/eraser.svg';\nimport iconRect from './icons/square.svg';\nimport iconTri from './icons/triangle.svg';\nimport iconCircle from './icons/circle.svg';\nimport iconRotate from './icons/rotate.svg';\nimport iconCrop from './icons/crop.svg';\nimport iconUndo from './icons/undo.svg';\nimport iconCounterclock from './icons/arrow-counterclockwise.svg';\nimport iconClockwise from './icons/arrow-clockwise.svg';\nimport iconFilter from './icons/asterisk.svg';\nimport iconGauss from './icons/bullseye.svg';\nimport React, { useState } from 'react';\nimport Modal from './Modal/Modal';\nimport { Form, FormGroup, Label, Input, Button} from 'reactstrap';\nimport { HexColorPicker } from \"react-colorful\";\n\n\n\n\n\nexport const MyCanvas = () => {\n\tconst [loadModalActive, setLoadModalActive] = useState(true); // состояние модального окна\n\tconst [brushModalActive, setBrushModalActive] = useState(false); \n\tconst [eraseModalActive, setEraseModalActive] = useState(false);\n\tconst [cropModalActive, setCropModalActive] = useState(false);\n\tconst [filterModalActive, setFilterModalActive] = useState(false);\n\tconst [gaussModalActive, setGaussModalActive] = useState(false);\n\tconst [drag, setDrag] = useState(false); // состояние перетаскивания\n\tconst [rotateModalActive, setRotateModalActive] = useState(false);\n\tconst [openEr,setOpenErase] = useState(false); // состояние dropdown кисти\n\tconst [openBr,setOpenBrush] = useState(false); // состояние dropdown ластика\n\tconst [brushVal, setBrushVal] = useState(10); // состояние размера кисти\n\tconst [eraseVal, setEraseVal] = useState(20); // состояние размера ластика\n\tconst [color, setColor] = useState(\"#aabbcc\"); //состояние палитры\n\tconst [angleValue, setAngleValue] = useState(\"0\"); // состояние угла\n\tconst [bs64, setBs64] = useState(\"\");\n\tconst [filename, setName] = useState(\"\");\n\tconst [bgPath, setBgPath] = useState(\"\");\n\tconst [fgPath, setFgPath] = useState(\"\");\n\tconst [gaussVal, setGaussVal] = useState(0);\n\n\tconst API_URL = \"http://palitra-redactor.ru:8080/api/\"\n\t\n\n    window.addEventListener(\"load\", function onWindowLoad(){\n\t\t//document.querySelector('.authWindow').style.display = 'none';\n        const canvasBg = document.getElementById(\"bg\");\n        const ctxBg = canvasBg.getContext(\"2d\");\n        const canvasFg = document.getElementById(\"fg\");\n        const ctxFg = canvasFg.getContext(\"2d\");\n\t\tconst canvasSave = document.getElementById(\"readyimg\");\n\t\tconst ctxSave = canvasSave.getContext('2d'); \n\t\t// const img = new Image();\n\t    // img.src = myimg;\n        // img.addEventListener('load', function(){\n        //     ctxBg.canvas.width  = img.width;\n\t\t// \tctxBg.canvas.height = img.height;\n\t\t// \tctxFg.canvas.width  = img.width;\n\t\t// \tctxFg.canvas.height = img.height;\n\t\t// \tctxSave.canvas.width  = img.width;\n\t\t// \tctxSave.canvas.height = img.height;\n\t\t// \tctxBg.drawImage(img, 0, 0);\n\t\t// });\n\t\n\t\t//ctxBg.canvas.width  = window.innerWidth;\n        //ctxBg.canvas.height = window.innerHeight;\n\n\t\t//чтобы отключить сглаживание изображения\n\t\tctxBg.webkitImageSmoothingEnabled = false;\n\t\tctxBg.msImageSmoothingEnabled = false;\n\t\tctxBg.imageSmoothingEnabled = false;\n        \n\t\tlet points = [];\n      \t\t\n        //ctxFg.canvas.width  = window.innerWidth;\n    \t//ctxFg.canvas.height = window.innerHeight;\n\t\t\n\t\tlet mouseX = 0;\n\t\tlet mouseY = 0;\n\t\tlet isDrawing = false;\n\n\t\tconst setMouseCoordinates = (e) => {\n\t\t\tmouseX = e.offsetX;\n\t\t\tmouseY = e.offsetY;\n\t\t};\n\n\t\tconst mouseDown = (e) => {\n\t\t\tsetMouseCoordinates(e);\n\t\t\tisDrawing = true;\n\t\t\tctxFg.beginPath();\n\t\t\tctxFg.moveTo(mouseX, mouseY);\n\t\t\t\n\t\t\tpoints.push({\n\t\t\tx: mouseX,\n\t\t\ty: mouseY,\n\t\t\tmode: \"begin\"\n\t\t\t});\n\t\t\tpicsCashe.casheMut(true);\n\t\t\tdocument.querySelector('#resizeInp').value = 2\n\t\t}\n\t\t\n\t\tconst mouseMove = (e) => {\n\t\t\tsetMouseCoordinates(e);\n\t\t\tif(isDrawing){\n\t\t\t\tctxFg.lineTo(mouseX, mouseY);\n\t\t\t\tctxFg.stroke();\n\t\t\t\t   points.push({\n\t\t\t\t\tx: mouseX,\n\t\t\t\t\ty: mouseY,\n\t\t\t\t\tmode: \"draw\"\n\t\t\t\t});\t\t\t\t\t\n\t\t\t}\n\t\t\tpicsCashe.casheMut(true);\n\t\t\tdocument.querySelector('#resizeInp').value = 2\n\t\t}\n\n\t\tconst mouseUp = (e) => {\n\t\t\tsetMouseCoordinates(e);\n\t\t\tisDrawing = false;\n\t\t\t\n\t\t\tpoints.push({\n\t\t\t\tx: mouseX,\n\t\t\t\ty: mouseY,\n\t\t\t\tmode: \"end\"\n\t\t\t});\n\t\t\tpicsCashe.casheMut(true);\n\t\t\tdocument.querySelector('#resizeInp').value = 2\n\t\t}\n\t\t// Обработчики рисования мышкой\n\t\tconst brushFunc = () => {\n\t\t\tctxFg.globalCompositeOperation = \"source-over\";\n\t\t\t//canvasFg.removeEventListener('click',mouseCoordEvent);\n\t\t\tcanvasFg.addEventListener('mousedown', mouseDown);\n\t\t\tcanvasFg.addEventListener('mousemove', mouseMove);\n\t\t\tcanvasFg.addEventListener('mouseup', mouseUp);\n\t\t}\n\t\tlet coord = [];\n\n\t\tconst removeListeners = () => {\n\t\t\tctxFg.globalCompositeOperation = \"source-over\";\n\t\t\tcanvasFg.removeEventListener('mousedown', mouseDown);\n\t\t\tcanvasFg.removeEventListener('mousemove', mouseMove);\n\t\t\tcanvasFg.removeEventListener('mouseup', mouseUp);\n\t\t}\n\n\t\t// функция рисования треугольника\n\t\tconst triangleFunc = () => {\n\t\t\tremoveListeners();\n\t\t\tcanvasFg.addEventListener('click', mouseTriCoordEvent);\n\t\t}\n\n\t\tconst rectFunc = () => {\n\t\t\tremoveListeners();\n\t\t\tcanvasFg.addEventListener('click', mouseRectCoordEvent);\n\t\t}\n\n\t\tconst mouseCropFunc = () => {\n\t\t\tremoveListeners();\n\t\t\tcanvasFg.addEventListener('click', mouseRectCropEvent);\n\t\t}\n\n\t\tconst circleFunc = () => {\n\t\t\tremoveListeners();\n\t\t\tcanvasFg.addEventListener('click', mouseCircleCoordEvent);\n\t\t}\n\n\t\tconst mouseTriCoordEvent = (e) => {\n\t\t\tconsole.log(coord);\n\t\t\tsetMouseCoordinates(e);\n\t\t\tcoord.push({\n\t\t\t\tx: mouseX,\n\t\t\t\ty: mouseY,\n\t\t\t});\n\t\t\t\n\t\t\tif (coord.length === 3) {\n\t\t\t\tisDrawing = true;\n\t\t\t\tctxFg.beginPath();\n\t\t\t\tctxFg.moveTo(coord[0]['x'], coord[0]['y']);\n\t\t\t\tctxFg.lineTo(coord[1]['x'], coord[1]['y']);\n\t\t\t\tctxFg.lineTo(coord[2]['x'], coord[2]['y']);\n\t\t\t\tctxFg.closePath();\n\t\t\t\tctxFg.stroke();\n\t\t\t\tisDrawing = false;\n\t\t\t\tcanvasFg.removeEventListener('click',mouseTriCoordEvent);\n\t\t\t\tcoord.length = 0;\n\t\t\t\n\t\t\t}\n\t\t\tpicsCashe.casheMut(true);\n\t\t\tdocument.querySelector('#resizeInp').value = 2\n\t\t}\n\n\t\tconst mouseRectCoordEvent = (e) => {\n\t\t\tconsole.log(coord);\n\t\t\tsetMouseCoordinates(e);\n\t\t\tcoord.push({\n\t\t\t\tx: mouseX,\n\t\t\t\ty: mouseY,\n\t\t\t});\n\t\t\t\n\t\t\tif (coord.length === 2) {\n\t\t\t\tisDrawing = true;\n\t\t\t\tconst rectWidth = Math.abs(coord[1]['x'] - coord[0]['x']);\n\t\t\t\tconst rectHeight = Math.abs(coord[1]['y'] -  coord[0]['y']);\n\t\t\t\tctxFg.strokeRect(coord[0]['x'],coord[0]['y'],rectWidth,rectHeight);\n\t\t\t\tisDrawing = false;\n\t\t\t\tcanvasFg.removeEventListener('click',mouseRectCoordEvent);\n\t\t\t\tcoord.length = 0;\n\t\t\t\n\t\t\t}\n\t\t\tpicsCashe.casheMut(true);\n\t\t\tdocument.querySelector('#resizeInp').value = 2\n\t\t}\n\n\n\t\tlet cropCoord = [];\n\t\tconst mouseRectCropEvent = (e) => {\n\t\t\tsetMouseCoordinates(e);\n\t\t\tcropCoord.push({\n\t\t\t\tx: mouseX,\n\t\t\t\ty: mouseY,\n\t\t\t});\n\t\t\t\n\t\t\t// console.log(cropCoord);\n\t\t\tif (cropCoord.length === 2) {\n\t\t\t\t// console.log(cropCoord);\n\t\t\t\t// console.log(canvasFg.width, canvasFg.height)\n\n\t\t\t\tconst qWidth = Math.abs(cropCoord[0].x - cropCoord[1].x)\n\t\t\t\tconst qHeight = Math.abs(cropCoord[0].y - cropCoord[1].y)\n\t\t\t\tconst qTop = cropCoord[0].y < cropCoord[1].y ? cropCoord[0].y : cropCoord[1].y\n\t\t\t\tconst qLeft = cropCoord[0].x < cropCoord[1].x ? cropCoord[0].x : cropCoord[1].x\n\t\t\t\tconsole.log(qHeight, qWidth, qLeft, qTop)\n\n\t\t\t\ttry{\n\t\t\t\t\tsendCrop(qLeft, qTop, qWidth, qHeight)\n\t\t\t\t}\n\t\t\t\tcatch {\n\t\t\t\t\tconsole.log('err on crop')\n\t\t\t\t}\n\t\t\t\t// picsCashe.rewriteCache(false);\n\t\t\t\t// const [bgPath, fgPath] = picsCashe.getCache();\n\t\t\t\t// fetch(`${API_URL}crop?path${bgPath}`)\n\n\t\t\t\tcropCoord.length = 0\n\t\t\t\tcanvasFg.removeEventListener('click',mouseRectCropEvent);\n\t\t\t}\n\t\t\tpicsCashe.casheMut(true);\n\t\t\tdocument.querySelector('#resizeInp').value = 2;\n\t\t}\n\n\t\tconst mouseCircleCoordEvent = (e) => {\n\t\t\tconsole.log(coord);\n\t\t\tsetMouseCoordinates(e);\n\t\t\tcoord.push({\n\t\t\t\tx: mouseX,\n\t\t\t\ty: mouseY,\n\t\t\t});\n\t\t\t\n\t\t\tif (coord.length === 2) {\n\t\t\t\tisDrawing = true;\n\t\t\t\tconst radius = Math.abs(coord[1]['x'] -  coord[0]['x']);\n\t\t\t\tctxFg.beginPath();\n\t\t\t\tctxFg.arc(coord[0]['x'],coord[0]['y'],radius,0, 2*Math.PI, false);\n\t\t\t\tctxFg.closePath();\n\t\t\t\tctxFg.stroke();\n\t\t\t\tisDrawing = false;\n\t\t\t\tcanvasFg.removeEventListener('click',mouseCircleCoordEvent);\n\t\t\t\tcoord.length = 0;\n\t\t\t\n\t\t\t}\n\t\t\tpicsCashe.casheMut(true);\n\t\t\tdocument.querySelector('#resizeInp').value = 2 \n\t\t}\n\n\t\t\n\t\tconst triangleBtn = document.getElementById('triangleBtn');\n\t\ttriangleBtn.addEventListener('click', triangleFunc);\n\n\t\tconst rectBtn = document.getElementById('rectBtn');\n\t\trectBtn.addEventListener('click', rectFunc);\n\t\t\n\t\tconst circleBtn = document.getElementById('circleBtn');\n\t\tcircleBtn.addEventListener('click', circleFunc);\n\t\t\n\t\tconst brushBtn = document.getElementById('mybrushBtn');\n\t\tbrushBtn.addEventListener('click', brushFunc);\n\n\t\tconst cropBtn = document.getElementById('cropBtn');\n\t\tcropBtn.addEventListener('click', mouseCropFunc);\n\t\t\n\t\t//переключение режима кисти на ластик\n\t\tconst eraseBtn = document.getElementById('eraseBtn');\n\t\teraseBtn.addEventListener('click', () => {\t\n\t\t\t//canvasFg.removeEventListener('click',mouseCoordEvent);\n\t\t\tcanvasFg.addEventListener('mousedown', mouseDown);\n\t\t\tcanvasFg.addEventListener('mousemove', mouseMove);\n\t\t\tcanvasFg.addEventListener('mouseup', mouseUp);\n\t\t\tctxFg.globalCompositeOperation = 'destination-out';\n\t\t})\n\n\t// \tfunction redrawAll(){\n\n\t// \t\tif(points.length===0){return;}\n\t\n\t// \t\tctxFg.clearRect(0,0,canvasFg.width,canvasFg.height);\n\t\n\t// \t\tfor(let i=0;i<points.length;i++){\n\t\n\t// \t\t  let pt=points[i];\n\t\n\t// \t\t  if(ctxFg.lineWidth!==pt.size){\n\t// \t\t\t  ctxFg.lineWidth=pt.size;\n\t// \t\t  }\n\t// \t\t  if(ctxFg.strokeStyle!==pt.color){\n\t// \t\t\t  ctxFg.strokeStyle=pt.color;\n\t// \t\t  }\n\t// \t\t  if(ctxFg.globalCompositeOperation!==pt.eraseMode){\n\t// \t\t\tctxFg.globalCompositeOperation=pt.eraseMode;\n\t// \t\t\t}\n\t// \t\t  if(pt.mode===\"begin\"){\n\t// \t\t\t  ctxFg.beginPath();\n\t// \t\t\t  ctxFg.moveTo(pt.x,pt.y);\n\t// \t\t  }\n\t// \t\t  ctxFg.lineTo(pt.x,pt.y);\n\t// \t\t  if(pt.mode === \"end\" || (i===points.length-1)){\n\t// \t\t\t  ctxFg.stroke();\n\t// \t\t  }\n\t// \t\t}\n\n\t// \t\tctxFg.stroke();\n\t// \t}\n\t\n\t// \tfunction undoLast(){\n\t// \t\t//console.log(points);\n\t// \t\tpoints.pop();\n\t// \t\t//console.log(points);\n\t// \t\tredrawAll();\n\t// \t}\n\t// \tconst undoBtn = document.querySelector('#undo');\n\t// \tlet interval;\n\t// \tconst undoFuncDown = () => {\n\t// \tinterval = setInterval(undoLast, 10);\n\t// \t}\n\t// \tconst undoFuncUp = () => {\n\t// \t\tclearInterval(interval);\n\t// \t\tif(points.length!==0){points[points.length-1].mode =  \"end\";}\n\t// \t}\n\n\t// \tundoBtn.addEventListener('mousedown', undoFuncDown);\n\t// \tundoBtn.addEventListener('mouseup', undoFuncUp);\n    });\n\n\tlet encoded\n\n\tlet picsCashe = {\n\t\tbg_path: null,\n\t\tfg_path: null,\n\t\tchangable: true,\n\t\tcasheMut: function(bool_val) {\n\t\t\tthis.changable = bool_val\n\t\t},\n\t\tsetCashe: function(values) {\n\t\t\tthis.bg_path = values[0];\n\t\t\tthis.fg_path = values[1];\n\t\t},\n\t\tgetCache: function(){\n\t\t\treturn [this.bg_path, this.fg_path]\n\t\t},\n\t\trewriteCache: async function(mutability) {\n\t\t\tif (this.changable){\n\t\t\t\t// await fetch(API_URL + '?path=' + bgResult.path, {method: 'DELETE'})\n\t\t\t\t// await fetch(API_URL + '?path=' + fgResult.path, {method: 'DELETE'})\n\t\t\t\tconst Fg = getImage(document.getElementById(\"fg\"))\n\t\t\t\t.src\n\t\t\t\t.replace(\"data:\", \"\").replace(/^.+,/, \"\");\n\t\t\t\tconst Bg = getImage(document.getElementById(\"bg\"))\n\t\t\t\t.src\n\t\t\t\t.replace(\"data:\", \"\").replace(/^.+,/, \"\");\n\n\t\t\t\tconst firstRequestOptions = prepareRequestOptions([[\"base64image\", Bg]]);\n\t\t\t\tconst secondRequestOptions = prepareRequestOptions([[\"base64image\", Fg]]);\n\n\t\t\t\tconst bgResult = await fetch(API_URL, firstRequestOptions)\n\t\t\t\t.then(response => response.json())\n\t\t\t\t.catch(error => console.log(`error occured on saving`));\n\n\t\t\t\tconst fgResult = await fetch(API_URL, secondRequestOptions)\n\t\t\t\t.then(response => response.json())\n\t\t\t\t.catch(error => console.log(`error occured on saving`));\n\n\t\t\t\tthis.setCashe([bgResult.path, fgResult.path]);\n\t\t\t\tthis.casheMut(mutability);\n\t\t\t\t// return [bgResult.path, fgResult.path]\n\n\t\t\t\t\n\t\t\t}\n\t\t\telse {\n\t\t\t\tconsole.log('cant change cache')\n\t\t\t}\n\t\t}\n\t}\n\n\n\tasync function handleChange(ev) {\n\t\tconsole.log('called encoded change')\n\t\tconst file = ev.target.files[0];\n\t\tsetName(file.name);\n\t\tsetBs64(await getBase64(file))\n\t}\n\n\tconst getBase64 = (file) => new Promise((resolve, reject) => {\n\t\tlet reader = new FileReader();\n\t\treader.readAsDataURL(file);\n\t\treader.onload = () => resolve(reader.result.replace(\"data:\", \"\").replace(/^.+,/, \"\"))\n\t\treader.onerror = (error) => reject('Error: ', error);\n\t})\n\n\tconst prepareRequestOptions = (searchParams) =>  {\n\t\tlet myHeaders = new Headers();\n\t\tmyHeaders.append(\"Content-Type\", \"application/x-www-form-urlencoded\");\n\t\tlet urlencoded = new URLSearchParams();\n\t\tsearchParams.forEach(el => urlencoded.append(el[0], el[1]))\n\t\treturn {\n\t\t\tmethod: 'POST',\n\t\t\theaders: myHeaders,\n\t\t\tbody: urlencoded,\n\t\t\tredirect: 'follow'\n\t\t}\n\t}\n\n\tasync function handleSubmit(event) {\n\t\tevent.preventDefault();\n\t\t// await fetch(API_URL + '?path=' + bgPath, {method: 'DELETE'})\n\t\tconst requestOptions = prepareRequestOptions([[\"base64image\", bs64], [\"image_name\", filename]])\n\t\tconst result = await fetch(API_URL, requestOptions)\n\t\t.then(response =>\n\t\t\tresponse.json())\n\t\t// .then(r => console.log(r))\n\t\t.catch(error => console.log(`error occured ${error}`));\n\t\tawait resizeCanvases(result.meta.width, result.meta.height).then(x=>console.log(x));\n\t\tawait loadImgToBgCv(result.bs64string, result.meta.width, result.meta.height, result.meta.format)\n\t\t.then((x)=>console.log(x));\n\t\tsetBgPath(result.path);\n\t\t// console.log(path)\n\t\tsetLoadModalActive(false);\n\n\t\tpicsCashe.casheMut(true);\n\n\t}\n\n\tconst resizeCanvases = (wdh, hgt) => new Promise((resolve, reject) => {\n\t\tconst ctxBg = document.getElementById(\"bg\").getContext(\"2d\");\n\t\tconst ctxFg = document.getElementById(\"fg\").getContext(\"2d\");\n\t\tconst ctxSave = document.getElementById(\"readyimg\").getContext(\"2d\");\n\t\tctxBg.canvas.width  = wdh;\n\t\tctxBg.canvas.height = hgt;\n\t\tctxFg.canvas.width  = wdh;\n\t\tctxFg.canvas.height = hgt;\n\t\tctxSave.canvas.width  = wdh;\n\t\tctxSave.canvas.height = hgt;\n\t\tresolve('canvases resized')\n\t\treject('error occored with resizing canvases')\n\t})\n\t\n\t\n\tconst loadImgToBgCv = (base64str, wdh, hgt, format) => new Promise((resolve, reject) =>{\n\t\tconst new_img = new Image()\n\t\tnew_img.src = `data:image/${format};base64,${base64str}`\n\t\tnew_img.width = wdh\n\t\tnew_img.height = hgt\n\t\tconsole.log('On BG we have')\n\t\tconsole.log(new_img)\n\t\tconst canvasBg = document.getElementById(\"bg\");\n        const ctxBg = canvasBg.getContext(\"2d\");\n\t\tnew_img.onload = () => {\n\t\t\tctxBg.drawImage(new_img, 0, 0);\n\t\t\tresolve('BG image was drawn on canvas')\n\t\t\treject('Canvas error occured')\n\t\t} \n\t})\n\n\tconst loadImgToFgCv = (base64str, wdh, hgt, format) => new Promise((resolve, reject) =>{\n\t\tconst new_img = new Image()\n\t\tnew_img.src = `data:image/${format};base64,${base64str}`\n\t\tnew_img.width = wdh\n\t\tnew_img.height = hgt\n\t\tconsole.log('On FG we have')\n\t\tconsole.log(new_img)\n        const canvasFg = document.getElementById(\"fg\");\n        const ctxFg = canvasFg.getContext(\"2d\");\n\t\tnew_img.onload = () => {\n\t\t\tctxFg.drawImage(new_img, 0, 0);\n\t\t\tresolve('FG image was drawn on canvas')\n\t\t\treject('Canvas error occured')\n\t\t} \n\t})\n\n\n\tfunction dragStartHandler(e) {\n    \te.preventDefault();\n    \tsetDrag(true); \n  \t};\n\n  \tfunction dragLeaveHandler(e) {\n    \te.preventDefault();\n    \tsetDrag(false); \n  \t}\n\n  \tasync function onDropHandler(e) {\n    \te.preventDefault();\n\t\t// await fetch(API_URL + '?path=' + bgPath, {method: 'DELETE'})\n\t\tsetDrag(false); \n\t\tconst file = e.dataTransfer.files[0]\n\t\tconsole.log(file)\n    \tconst requestOptions = prepareRequestOptions([[\"base64image\", await getBase64(file)], [\"image_name\", file.name]])\n\t\tconst result = await fetch(API_URL, requestOptions)\n\t\t.then(response =>\n\t\t\tresponse.json())\n\t\t// .then(r => console.log(r))\n\t\t.catch(error => console.log(`error occured ${error}`));\n\t\tawait resizeCanvases(result.meta.width, result.meta.height).then(x=>console.log(x));\n\t\tawait loadImgToBgCv(result.bs64string, result.meta.width, result.meta.height, result.meta.format)\n\t\t.then((x)=>console.log(x))\n\t\tsetBgPath(result.path)\n\t\tsetLoadModalActive(false);\n\t\t\n\t\tpicsCashe.casheMut(true);\n\n  \t}\n\n\n\t// function prepareGetOptions(params) {\n\n\t// }\n\n\tasync function rotateImage(angle){\n\t\tconst Fg = getImage(document.getElementById(\"fg\"))\n\t\t.src\n\t\t.replace(\"data:\", \"\").replace(/^.+,/, \"\");\n\t\tconst Bg = getImage(document.getElementById(\"bg\"))\n\t\t.src\n\t\t.replace(\"data:\", \"\").replace(/^.+,/, \"\");\n\n\t\tconst firstRequestOptions = prepareRequestOptions([\n\t\t\t[\"base64image\", Bg], \n\t\t\t[\"image_name\", filename],\n\t\t\t[\"angle\", angle]\n\t\t]);\n\n\t\tconst secondRequestOptions = prepareRequestOptions([\n\t\t\t[\"base64image\", Fg], \n\t\t\t[\"image_name\", filename],\n\t\t\t[\"angle\", angle]\n\t\t]);\n\n\t\tconst bgResult = await fetch(API_URL + \"rotate\", firstRequestOptions)\n\t\t.then(response => response.json())\n\t\t// .then(x => console.log(x))\n\t\t.catch(error => console.log(`error occured on sending rotate req`));\n\t\tawait resizeCanvases(bgResult.meta.width, bgResult.meta.height).then((x)=>console.log(x));\n\t\tawait loadImgToBgCv(bgResult.bs64string, bgResult.meta.width, bgResult.meta.height, bgResult.meta.format)\n\t\t.then((x)=>console.log(x));\n\t\t\n\n\t\tconst fgResult = await fetch(API_URL + \"rotate\", secondRequestOptions)\n\t\t.then(response => response.json())\n\t\t.catch(error => console.log(`error occured on sending rotate req`));\n\t\tawait loadImgToFgCv(fgResult.bs64string, fgResult.meta.width, fgResult.meta.height, fgResult.meta.format)\n\t\t.then((x)=>console.log(x));\n\t\t\n\n\t\tdocument.querySelector('#resizeInp').value = 2\n\t\tpicsCashe.casheMut(true);\n\t\t// await fetch(API_URL + '?path=' + path, {method: 'DELETE'})\n\t}\n\n\n\t\n\n\tasync function handleScaleChange() {\n\t\tawait picsCashe.rewriteCache(false);\n\t\tconst [bgPath, fgPath] = picsCashe.getCache();\n\t\tconst kf = Number(document.querySelector('#resizeInp').value) / 2;\n\t\t\n\t\tconst bgResult = await fetch(`${API_URL}resize?path=${bgPath}&kf=${kf}`, {method: 'GET'})\n\t\t.then(x=>x.json())\n\t\tawait resizeCanvases(bgResult.meta.width, bgResult.meta.height).then((x)=>console.log(x));\n\t\tawait loadImgToBgCv(bgResult.bs64string, bgResult.meta.width, bgResult.meta.height, bgResult.meta.format)\n\t\t.then((x)=>console.log(x));\n\n\n\t\tconst fgResult = await fetch(`${API_URL}resize?path=${fgPath}&kf=${kf}`, {method: 'GET'})\n\t\t.then(x=>x.json())\n\t\tawait loadImgToFgCv(fgResult.bs64string, fgResult.meta.width, fgResult.meta.height, fgResult.meta.format)\n\t\t.then((x)=>console.log(x));\n\n\n\t}\n\n\tasync function sendCrop(lt, tp, wd, hg){\n\t\tconst Fg = getImage(document.getElementById(\"fg\"))\n\t\t.src\n\t\t.replace(\"data:\", \"\").replace(/^.+,/, \"\");\n\t\tconst Bg = getImage(document.getElementById(\"bg\"))\n\t\t.src\n\t\t.replace(\"data:\", \"\").replace(/^.+,/, \"\");\n\n\t\tconst firstRequestOptions = prepareRequestOptions([\n\t\t\t[\"base64image\", Bg], \n\t\t\t[\"image_name\", filename],\n\t\t\t[\"left\", lt],\n\t\t\t[\"top\", tp],\n\t\t\t[\"width\", wd],\n\t\t\t[\"height\", hg]\n\t\t]);\n\n\t\tconst secondRequestOptions = prepareRequestOptions([\n\t\t\t[\"base64image\", Fg], \n\t\t\t[\"image_name\", filename],\n\t\t\t[\"left\", lt],\n\t\t\t[\"top\", tp],\n\t\t\t[\"width\", wd],\n\t\t\t[\"height\", hg]\n\t\t]);\n\n\t\tconst bgResult = await fetch(API_URL + \"crop\", firstRequestOptions)\n\t\t.then(response => response.json())\n\t\t.catch(error => console.log(`error occured on sending rotate req`));\n\t\tawait resizeCanvases(bgResult.meta.width, bgResult.meta.height).then((x)=>console.log(x));\n\t\tawait loadImgToBgCv(bgResult.bs64string, bgResult.meta.width, bgResult.meta.height, bgResult.meta.format)\n\t\t.then((x)=>console.log(x));\n\t\t\n\n\t\tconst fgResult = await fetch(API_URL + \"crop\", secondRequestOptions)\n\t\t.then(response => response.json())\n\t\t.catch(error => console.log(`error occured on sending rotate req`));\n\t\tawait loadImgToFgCv(fgResult.bs64string, fgResult.meta.width, fgResult.meta.height, fgResult.meta.format)\n\t\t.then((x)=>console.log(x));\n\n\t}\n\n\tasync function handleScaleChange() {\n\t\tawait picsCashe.rewriteCache(false);\n\t\tconst [bgPath, fgPath] = picsCashe.getCache();\n\t\tconst kf = Number(document.querySelector('#resizeInp').value) / 2;\n\t\t\n\t\tconst bgResult = await fetch(`${API_URL}resize?path=${bgPath}&kf=${kf}`, {method: 'GET'})\n\t\t.then(x=>x.json())\n\t\tawait resizeCanvases(bgResult.meta.width, bgResult.meta.height).then((x)=>console.log(x));\n\t\tawait loadImgToBgCv(bgResult.bs64string, bgResult.meta.width, bgResult.meta.height, bgResult.meta.format)\n\t\t.then((x)=>console.log(x));\n\n\n\t\tconst fgResult = await fetch(`${API_URL}resize?path=${fgPath}&kf=${kf}`, {method: 'GET'})\n\t\t.then(x=>x.json())\n\t\tawait loadImgToFgCv(fgResult.bs64string, fgResult.meta.width, fgResult.meta.height, fgResult.meta.format)\n\t\t.then((x)=>console.log(x));\n\t}\n\n\n\tasync function gauss(kf) {\n\t\tconst Fg = getImage(document.getElementById(\"fg\"))\n\t\t.src\n\t\t.replace(\"data:\", \"\").replace(/^.+,/, \"\");\n\t\tconst Bg = getImage(document.getElementById(\"bg\"))\n\t\t.src\n\t\t.replace(\"data:\", \"\").replace(/^.+,/, \"\");\n\n\t\tconst firstRequestOptions = prepareRequestOptions([\n\t\t\t[\"base64image\", Bg], \n\t\t\t[\"image_name\", filename],\n\t\t\t[\"sigma\", kf]\n\t\t]);\n\n\t\tconst secondRequestOptions = prepareRequestOptions([\n\t\t\t[\"base64image\", Fg], \n\t\t\t[\"image_name\", filename],\n\t\t\t[\"sigma\", kf]\n\t\t]);\n\t\tconsole.log(API_URL + \"gblur\", firstRequestOptions)\n\t\tconst bgResult = await fetch(API_URL + \"gblur\", firstRequestOptions)\n\t\t.then(response => response.json())\n\t\t// .then(x => console.log(x))\n\t\tawait resizeCanvases(bgResult.meta.width, bgResult.meta.height).then((x)=>console.log(x));\n\t\tawait loadImgToBgCv(bgResult.bs64string, bgResult.meta.width, bgResult.meta.height, bgResult.meta.format)\n\t\t.then((x)=>console.log(x));\n\t\t\n\n\t\tconst fgResult = await fetch(API_URL + \"gblur\", secondRequestOptions)\n\t\t.then(response => response.json())\n\t\t.catch(error => console.log(`error occured on sending rotate req`));\n\t\tawait loadImgToFgCv(fgResult.bs64string, fgResult.meta.width, fgResult.meta.height, fgResult.meta.format)\n\t\t.then((x)=>console.log(x));\n\t\t\n\n\t\tdocument.querySelector('#resizeInp').value = 2\n\t\tpicsCashe.casheMut(true);\n\t}\n\n\n\tasync function chb() {\n\t\tconst Fg = getImage(document.getElementById(\"fg\"))\n\t\t.src\n\t\t.replace(\"data:\", \"\").replace(/^.+,/, \"\");\n\t\tconst Bg = getImage(document.getElementById(\"bg\"))\n\t\t.src\n\t\t.replace(\"data:\", \"\").replace(/^.+,/, \"\");\n\n\t\tconst firstRequestOptions = prepareRequestOptions([\n\t\t\t[\"base64image\", Bg], \n\t\t\t[\"image_name\", filename]\n\t\t]);\n\n\t\tconst secondRequestOptions = prepareRequestOptions([\n\t\t\t[\"base64image\", Fg], \n\t\t\t[\"image_name\", filename]\n\t\t]);\n\n\t\tconst bgResult = await fetch(API_URL + \"/filter/greyscale\", firstRequestOptions)\n\t\t.then(response => response.json())\n\t\t// .then(x => console.log(x))\n\t\tawait resizeCanvases(bgResult.meta.width, bgResult.meta.height).then((x)=>console.log(x));\n\t\tawait loadImgToBgCv(bgResult.bs64string, bgResult.meta.width, bgResult.meta.height, bgResult.meta.format)\n\t\t.then((x)=>console.log(x));\n\t\t\n\n\t\tconst fgResult = await fetch(API_URL + \"/filter/greyscale\", secondRequestOptions)\n\t\t.then(response => response.json())\n\t\t.catch(error => console.log(`error occured on sending rotate req`));\n\t\tawait loadImgToFgCv(fgResult.bs64string, fgResult.meta.width, fgResult.meta.height, fgResult.meta.format)\n\t\t.then((x)=>console.log(x));\n\t\t\n\n\t\tdocument.querySelector('#resizeInp').value = 2\n\t\tpicsCashe.casheMut(true);\n\t}\n\t\n\tasync function negate() {\n\t\tconst Fg = getImage(document.getElementById(\"fg\"))\n\t\t.src\n\t\t.replace(\"data:\", \"\").replace(/^.+,/, \"\");\n\t\tconst Bg = getImage(document.getElementById(\"bg\"))\n\t\t.src\n\t\t.replace(\"data:\", \"\").replace(/^.+,/, \"\");\n\n\t\tconst firstRequestOptions = prepareRequestOptions([\n\t\t\t[\"base64image\", Bg], \n\t\t\t[\"image_name\", filename]\n\t\t]);\n\n\t\tconst secondRequestOptions = prepareRequestOptions([\n\t\t\t[\"base64image\", Fg], \n\t\t\t[\"image_name\", filename]\n\t\t]);\n\n\t\tconst bgResult = await fetch(API_URL + \"/filter/negate\", firstRequestOptions)\n\t\t.then(response => response.json())\n\t\t// .then(x => console.log(x))\n\t\tawait resizeCanvases(bgResult.meta.width, bgResult.meta.height).then((x)=>console.log(x));\n\t\tawait loadImgToBgCv(bgResult.bs64string, bgResult.meta.width, bgResult.meta.height, bgResult.meta.format)\n\t\t.then((x)=>console.log(x));\n\t\t\n\n\t\tconst fgResult = await fetch(API_URL + \"/filter/negate\", secondRequestOptions)\n\t\t.then(response => response.json())\n\t\t.catch(error => console.log(`error occured on sending rotate req`));\n\t\tawait loadImgToFgCv(fgResult.bs64string, fgResult.meta.width, fgResult.meta.height, fgResult.meta.format)\n\t\t.then((x)=>console.log(x));\n\t\t\n\n\t\tdocument.querySelector('#resizeInp').value = 2\n\t\tpicsCashe.casheMut(true);\n\t}\n\n\t// async function rotateImage(angle) {\n\t// \tconst Fg = getImage(document.getElementById(\"fg\"))\n\t// \t.src\n\t// \t.replace(\"data:\", \"\").replace(/^.+,/, \"\");\n\t// \tconst Bg = getImage(document.getElementById(\"bg\"))\n\t// \t.src\n\t// \t.replace(\"data:\", \"\").replace(/^.+,/, \"\");\n\n\t// \tconst firstRequestOptions = prepareRequestOptions([\n\t// \t\t[\"base64image\", Bg], \n\t// \t\t[\"image_name\", filename],\n\t// \t\t[\"angle\", angle]\n\t// \t]);\n\t// \tconst bgResult = await fetch(API_URL + \"/rotate\", firstRequestOptions)\n\t// \t.then(response => response.json())\n\t// \t.catch(error => console.log(`error occured on sending rotate req`));\n\t// \tawait resizeCanvases(bgResult.meta.width, bgResult.meta.height).then((x)=>console.log(x));\n\t// \tawait loadImgToBgCv(bgResult.bs64img, bgResult.meta.width, bgResult.meta.height, bgResult.meta.format)\n\t// \t.then((x)=>console.log(x));\n\t\t// \tconst secondRequestOptions = prepareRequestOptions([\n\t// \t\t[\"base64image\", Fg], \n\t// \t\t[\"image_name\", filename],\n\t// \t\t[\"angle\", angle]\n\t// \t]);\n\n\n\t// \tconst fgResult = await fetch(API_URL + \"/rotate\", secondRequestOptions)\n\t// \t.then(response => response.json())\n\t// \t.catch(error => console.log(`error occured on sending rotate req`));\n\t// \tawait loadImgToFgCv(fgResult.bs64img, fgResult.meta.width, fgResult.meta.height, fgResult.meta.format)\n\t// \t.then((x)=>console.log(x));\n\t// \tpicsCashe.casheMut(true);\n\t// \tdocument.querySelector('#resizeInp').value = 2\n\t// }\n\n\t\t\n\n\t// let encoded, filename;\n\t\n\n\n\t// async function handleChange(event) {\n\t// \tconsole.log('called encoded change')\n\t// \tconst file = event.target.files[0];\n\t// \tfilename = file.name;\n\t// \tencoded = await getBase64(file)\n\t// }\n\n\t// \n\n\t// const getBase64 = (file) => new Promise(function (resolve, reject) {\n\t// \tlet reader = new FileReader();\n\t// \treader.readAsDataURL(file);\n\t// \treader.onload = () => resolve(reader.result.replace(\"data:\", \"\").replace(/^.+,/, \"\"))\n\t// \treader.onerror = (error) => reject('Error: ', error);\n\t// })\n\n\n\n\t// const prepareRequestOptions = (searchParams) =>  {\n\t// \tlet myHeaders = new Headers();\n\t// \tmyHeaders.append(\"Content-Type\", \"application/x-www-form-urlencoded\");\n\t\t\n\t// \tlet urlencoded = new URLSearchParams();\n\t// \tsearchParams.forEach(el => urlencoded.append(el[0], el[1]))\n\t// \treturn {\n\t// \t\tmethod: 'GET',\n\t// \t\theaders: myHeaders,\n\t// \t\tbody: urlencoded,\n\t// \t\tredirect: 'follow'\n\t// \t}\n\t// }\n\n\n\t\t\n\t// \tconst secondRequestOptions = prepareRequestOptions([\n\t// \t\t[\"base64image\", Fg], \n\t// \t\t[\"image_name\", filename],\n\t// \t\t[\"angle\", angle]\n\t// \t]);\n\t// \tconst fgResult = await fetch(API_URL + \"/rotate\", secondRequestOptions)\n\t// \t.then(response => response.json())\n\t// \t.catch(error => console.log(`error occured on sending rotate req`));\n\t// \tawait loadImgToFgCv(fgResult.bs64img, fgResult.meta.width, fgResult.meta.height, fgResult.meta.format)\n\t// \t.then((x)=>console.log(x));\n\t// \tpicsCashe.casheMut(true);\n\t// \tdocument.querySelector('#resizeInp').value = 2\n\t// }\n\n\n\n\n\t// const rewriteCache = (mutability) => new Promise((resolve, reject) =>{\n\t// \tconsole.log('called rewritor')\n\t// \tconst Fg = getImage(document.getElementById(\"fg\"))\n\t// \t.src\n\t// \t.replace(\"data:\", \"\").replace(/^.+,/, \"\");\n\t// \tconst Bg = getImage(document.getElementById(\"bg\"))\n\t// \t.src\n\t// \t.replace(\"data:\", \"\").replace(/^.+,/, \"\");\n\t// \tpicsCashe.changeCashe([Bg, Fg]);\n\t// \tpicsCashe.casheMut(mutability);\n\t// \tresolve(picsCashe.getCache())\n\t// \treject('cache error ')\n\t// });\n\n\n\t// async function handleScaleInput() {\n\t// \tconst [Bg, Fg] = await rewriteCache(false).then(x => x)\n\n\t// \tconst firstRequestOptions = prepareRequestOptions([\n\t// \t\t[\"base64image\", Bg], \n\t// \t\t[\"image_name\", filename],\n\t// \t\t[\"kf\", Number(document.querySelector('#resizeInp').value) / 2]\n\t// \t]);\n\t// \tconst bgResult = await fetch(API_URL + \"/resize\", firstRequestOptions)\n\t// \t.then(response => response.json())\n\t// \t.catch(error => console.log(`error occured on sending rotate req`));\n\t// \tawait resizeCanvases(bgResult.meta.width, bgResult.meta.height).then((x)=>console.log(x));\n\t// \tawait loadImgToBgCv(bgResult.bs64img, bgResult.meta.width, bgResult.meta.height, bgResult.meta.format)\n\t// \t.then((x)=>console.log(x));\n\n\t// \tconst secondRequestOptions = prepareRequestOptions([\n\t// \t\t[\"base64image\", Fg], \n\t// \t\t[\"image_name\", filename],\n\t// \t\t[\"kf\", Number(document.querySelector('#resizeInp').value)/2]\n\t// \t]);\n\t// \tconst fgResult = await fetch(API_URL + \"/resize\", secondRequestOptions)\n\t// \t.then(response => response.json())\n\t// \t.catch(error => console.log(`error occured on sending rotate req`));\n\t// \tawait loadImgToFgCv(fgResult.bs64img, fgResult.meta.width, fgResult.meta.height, fgResult.meta.format)\n\t// \t.then((x)=>console.log(x));\n\t// }\n\n\tconst getImage = canvas =>{\n    \tlet imageData = canvas.toDataURL();\n    \tlet image = new Image();\n    \timage.src = imageData;\n\t\t// image.crossOrigin = 'Anonymous'\n    \treturn image;\n\t}\n\n\t// функция изменяющая размер кисти через ползунок\n\tconst changeBrushSize = () => {\n\t\tconst canvasFg = document.getElementById(\"fg\");\n\t\tconst ctxFg = canvasFg.getContext(\"2d\");\n\t\tconst brushInp = document.getElementById('brushSize');\n\t\tsetBrushVal(brushInp.value);\n\t\tctxFg.lineWidth = brushVal;\n\t}\n\t// функция изменяющая размер ластика через ползунок\n\tconst changeEraseSize = () => {\n\t\tconst canvasFg = document.getElementById(\"fg\");\n\t\tconst ctxFg = canvasFg.getContext(\"2d\");\n\t\tconst eraseInp = document.getElementById('eraseSize');\n\t\tsetEraseVal(eraseInp.value);\n\t\tctxFg.lineWidth = eraseVal;\n\t}\n\n\t// функция изменения цвета кисти\n\tconst changeBrushColor = () => {\n\t\tconst canvasFg = document.getElementById(\"fg\");\n\t\tconst ctxFg = canvasFg.getContext(\"2d\");\n\t\tctxFg.strokeStyle = color;\n\t}\n\t//изменение угла поворота изображения\n\tconst changeAngle = () => {\n\t\tconst angleInp = document.getElementById('angle');\n\t\tsetAngleValue(angleInp.value);\n\t}\n\t//сохранение изображения\n\tconst saveImage = (image) => {\n\t\tvar link = document.createElement(\"a\");\n\t\tlink.setAttribute(\"href\", image.src);\n\t\tlink.setAttribute(\"download\", \"canvasImage\");\n\t\tlink.click();\n\t}\n\t// изм коэф Гаусса\n\n\tconst changeGaussKf = () => {\n\t\tconst gaussInp = document.querySelector('#gauss');\n\t\tsetGaussVal(gaussInp.value);\n\t}\n\tconst saveImgBtn = () =>{\n\t\tconst canvasSave = document.getElementById(\"readyimg\");\n\t\tconst canvasFg = document.getElementById(\"fg\");\n\t\tconst canvasBg = document.getElementById(\"bg\");\n\t\tconst img1 = getImage(canvasBg);\n\t\tconst img2 = getImage(canvasFg);\n\t\tconst ctx = canvasSave.getContext('2d');\n\t\timg1.onload = () => {\n\t\t\tctx.drawImage(img1,0,0)\n\t\t\timg2.onload = () => {\n\t\t\t   ctx.drawImage(img2,0,0);\n\t\t\t   let img3 = getImage(canvasSave);\n\t\t\t   saveImage(img3);\n\t\t\t}\n\t\t}\n\t}\n\n\n    return (\n        <div>\n\t\t\t<MySideNav>\n\t\t\t\t{/* <NavItem id=\"undo\">\n\t\t\t\t\t<NavIcon><img className='icon1' alt='icon1' src={iconUndo}></img></NavIcon>\n\t\t\t\t\t<NavText>Отменить действие</NavText>\n\t\t\t\t\n\t\t\t\t</NavItem> */}\n\n          \t\t<NavItem className=\"navItem\" onClick = {() => setLoadModalActive(true)}>\n            \t\t<NavIcon><img className='icon1' alt='icon1' src={iconLoad}></img></NavIcon>\n\t\t\t\t\t<NavText>Загрузить</NavText>\n\t\t\t\t</NavItem>\n            \t\n\t\t\t\t<NavItem onClick={saveImgBtn}>\n\t\t\t\t\t<NavIcon><img alt='save' src={iconSave}></img></NavIcon>\n\t\t\t\t\t<NavText>Сохранить</NavText>\n\t\t\t\t</NavItem>\n\n            \t<NavItem className=\"navItem\" id=\"mybrushBtn\"  onClick = {() => setBrushModalActive(true)}>\n\t\t\t\t\t<NavIcon><img alt='Brush' src={iconBrush}></img></NavIcon>\n\t\t\t\t\t<NavText>Кисть</NavText>\n\t\t\t\t</NavItem>\n\t\t\t\t<NavItem className=\"navItem\" id=\"eraseBtn\" onClick = {() => setEraseModalActive(true)}>\n\t\t\t\t\t<NavIcon><img alt='Eraser' src={iconEraser}></img></NavIcon>\n\t\t\t\t\t<NavText>Ластик</NavText>\n\t\t\t\t</NavItem>\n\t\t\t\t\n\t\t\t\t<NavItem className=\"navItem\" id='rectBtn'>\n            \t\t<NavIcon><img className='icon1' alt='rect' src={iconRect}></img></NavIcon>\n\t\t\t\t\t<NavText>Прямоугольник</NavText>\n\t\t\t\t</NavItem>\n\n\t\t\t\t<NavItem className=\"navItem\" id='triangleBtn'>\n            \t\t<NavIcon><img className='icon1' alt='triangle' src={iconTri}></img></NavIcon>\n\t\t\t\t\t<NavText>Треугольник</NavText>\n\t\t\t\t</NavItem>\n\t\t\t\t\n\t\t\t\t<NavItem className=\"navItem\" id='circleBtn'>\n            \t\t<NavIcon><img className='icon1' alt='circle' src={iconCircle}></img></NavIcon>\n\t\t\t\t\t<NavText>Круг</NavText>\n\t\t\t\t</NavItem>\n\n\t\t\t\t<NavItem className=\"navItem\" id='rotateBtn' onClick = {() => setRotateModalActive(true)}>\n            \t\t<NavIcon><img className='icon1' alt='rotate' src={iconRotate}></img></NavIcon>\n\t\t\t\t\t<NavText>Поворот</NavText>\n\t\t\t\t</NavItem>\n\n\t\t\t\t<NavItem className=\"navItem\" id='cropBtn'>\n            \t\t<NavIcon><img className='icon1' alt='crop' src={iconCrop}></img></NavIcon>\n\t\t\t\t\t<NavText>Обрезка</NavText>\n\t\t\t\t</NavItem>\n\t\t\t\t<NavItem className=\"navItem\" id='gaussBtn' onClick = {() => setGaussModalActive(true)}>\n            \t\t<NavIcon><img className='icon1' alt='gauss' src={iconGauss}></img></NavIcon>\n\t\t\t\t\t<NavText>Размытие по Гауссу</NavText>\n\t\t\t\t</NavItem>\n\t\t\t\t<NavItem className=\"navItem\" id='filterBtn' onClick = {() => setFilterModalActive(true)}>\n            \t\t<NavIcon><img className='icon1' alt='filter' src={iconFilter}></img></NavIcon>\n\t\t\t\t\t<NavText>Фильтры</NavText>\n\t\t\t\t</NavItem>\n        \t</MySideNav>  \n        \n            <form id=\"form\" action=\"\" method=\"post\">\n\t            <div className=\"paint-canvas\"  onMouseOver = {() => {setOpenBrush(false); setOpenErase(false)}} >\n\t\t            <canvas id='bg' className={classes.cnvs_bg}></canvas>\n\t\t\t\t\t<canvas id='fg' className={classes.cnvs_fg}></canvas>\n\t\t\t\t\t<canvas id='readyimg' className={classes.cnvs_save}></canvas>\n\t\t            <input id=\"canvas_img\" type=\"hidden\" name=\"canvas_img\" value=\"\"/>\n\t            </div>\n            </form>\n\t\t\t<Modal active={loadModalActive} setActive={setLoadModalActive}>\n          \t\t<Form onSubmit={handleSubmit} encType=\"multipart/form-data\" method=\"post\">\n            \t\t<FormGroup>\n              \t\t\t<Label for=\"loadFile\">\n                \t\t\tЗагрузите файл\n              \t\t\t</Label>\n              \t\t\t<Input\n                \t\t\tid=\"loadFile\"\n                \t\t\ttype=\"file\"\n\t\t\t\t\t\t\tonChange={handleChange}\n              \t\t\t/>\n\t\t\t\t\t\t<Button className={classes.button}>\n    \t\t\t\t\t\tЗагрузить\n  \t\t\t\t\t\t</Button>\n            \t\t</FormGroup>\n          \t\t</Form>\n          \t\t<div className=\"text-between\">или</div>\n          \t    \t{drag\n          \t    \t? <div className=\"drop-area\"\n                  \tonDragStart={e => dragStartHandler(e)}\n                  \tonDragLeave={e => dragLeaveHandler(e)}\n                  \tonDragOver={e => dragStartHandler(e)}\n                  \tonDrop={e => onDropHandler(e)}\n                \t>Отпустите файл</div>\n          \t    \t: <div className=\"drop-area\"\n                  \tonDragStart={e => dragStartHandler(e)}\n                  \tonDragLeave={e => dragLeaveHandler(e)}\n                  \tonDragOver={e => dragStartHandler(e)}\n                \t>Перетащите файл сюда\n                \t</div>\n        \t    \t}\n        \t</Modal>\n\t\t\t<Modal active={rotateModalActive} setActive={setRotateModalActive}>\n\t\t\t\t<Form>\n\t\t\t\t\t<FormGroup>\n\t\t\t\t\t\t<Label for=\"angle\">Введите угол поворота</Label>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tid=\"angle\"\n\t\t\t\t\t\t\tname=\"angle\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tonChange={changeAngle}\n\t\t\t\t\t\t\tvalue={angleValue}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</FormGroup>\n\t\t\t\t\t<Button className={classes.button_form} onClick={()=>rotateImage(angleValue)} >Ок</Button>\n\t\t\t\t\n\t\t\t\t\t<FormGroup>\n\t\t\t\t\t<Button type='button' className={classes.button} onClick={()=>rotateImage(\"90\")}><img src={iconClockwise}  id=\"clockwise\" alt=\"rotateOnClock\" /></Button><br/>\n\t\t\t\t\t<Button type='button' className={classes.button} onClick={()=>rotateImage(\"270\")}><img src={iconCounterclock}  alt=\"rotateOnClock\" /></Button>\n\t\t\t\t\t</FormGroup>\n\t\t\t\t\t\t</Form>\t\t\n        \t</Modal>\n\t\t\t<Modal active={brushModalActive} setActive={setBrushModalActive}>\n\t\t\t\t<div>Размер</div>\n\t\t\t\t<Input\n      \t\t\t\tid=\"brushSize\"\n      \t\t\t\ttype=\"range\"\n\t\t\t\t\tmin=\"0\" \n\t\t\t\t\tmax=\"100\"\n\t\t\t\t\tonChange={changeBrushSize}\n\t\t\t\t\tvalue={brushVal}\n\t\t\t\t\t// onBeforeInput={saveCache}\n    \t\t\t/>\t\t\n\t\t\t\t<div>Цвет</div> \n\t\t\t\t<HexColorPicker color={color} onChange={setColor}/>\n\t\t\t\t<Button className={classes.button} onClick={changeBrushColor}>Поменять цвет</Button>\t\n        \t</Modal>\n\t\t\t<Modal active={eraseModalActive} setActive={setEraseModalActive}>\n\t\t\t <div>Размер</div>\n\t\t\t\t<Input\n      \t\t\t\tid=\"eraseSize\"\n      \t\t\t\ttype=\"range\"\n\t\t\t\t\tmin=\"0\" \n\t\t\t\t\tmax=\"100\"\n\t\t\t\t\tonChange={changeEraseSize}\n\t\t\t\t\tvalue={eraseVal}\n    \t\t\t/>\t\t\n        \t</Modal>\n\t\t\t<Modal active={cropModalActive} setActive={setCropModalActive}>\n\t\t\t\t<Form>\n\t\t\t\t\t<FormGroup>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tid=\"inp1\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</FormGroup>\n\t\t\t\t\t<FormGroup><Input\n\t\t\t\t\t\t\tid=\"inp2\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t/></FormGroup>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<FormGroup><Input\n\t\t\t\t\t\t\tid=\"inp3\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t/></FormGroup>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<FormGroup>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tid=\"inp4\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</FormGroup>\n\t\t\t\t\t<Button type='button' className={classes.button}>Обрезать</Button>\n\t\t\t\t</Form>\n\t\t\t</Modal>\n\n\t\t\t<Modal active={gaussModalActive} setActive={setGaussModalActive}>\n\t\t\t\t<Form>\n\t\t\t\t\t<FormGroup>\n\t\t\t\t\t\t<Label for=\"gauss\">Размытие по Гауссу</Label>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tid=\"gauss\"\n\t\t\t\t\t\t\tname=\"gauss\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tonChange={changeGaussKf}\n\t\t\t\t\t\t\tvalue={gaussVal}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</FormGroup>\n\t\t\t\t\t<Button type='button' className={classes.button} onClick={() => gauss(gaussVal)}>Ок</Button>\n\t\t\t\t</Form>\n\t\t\t</Modal>\n\t\t\t<Modal active={filterModalActive} setActive={setFilterModalActive}>\n\t\t\t\t<Button type='button' className={classes.button} onClick={negate}>Негатив</Button>\n\t\t\t\t<Button type='button' className={classes.button} onClick={chb}>Черно-белый</Button>\n\t\t\t\t<Button type='button' className={classes.button}>Сепия</Button>\n\t\t\t</Modal>\n\t\t\t<div id=\"resize\">\n\t\t\t<div>Масштаб</div>\n\t\t\t<Input\n      \t\t\t\tid=\"resizeInp\"\n      \t\t\t\ttype=\"range\"\n\t\t\t\t\tmin=\"1\" \n\t\t\t\t\tmax=\"3\"\n\t\t\t\t\tstep=\"0.1\"\n\t\t\t\t\tonChange={handleScaleChange}\n\t\t\t\t\t// onBeforeInput = {handleScaleBeforeInput}\n    \t\t\t/>\t\t\n\t\t\t</div>\n\t\t</div>  \n      );\n  }\n  \n  export default MyCanvas;","import './App.css';\nimport MyCanvas from './Components/MyCanvas';\nimport { BrowserRouter as Router, Routes, Route}\n    from 'react-router-dom';\n\nimport { Form, FormGroup, Label, FormFeedback, FormText, Input, Button } from 'reactstrap';\n\nconst App = () => {\n    \n  return ( \n      <div className = \"App\">\n        {/* <div className='authWindow'>\n          <Form id=\"auth\">\n            <FormGroup>\n              <Label for=\"exampleEmail\">\n                Email\n              </Label>\n              <Input\n                id=\"exampleEmail\"\n                name=\"email\"\n                placeholder=\"Ваша почта\"\n                type=\"email\"\n              />\n            </FormGroup>\n            <FormGroup>\n              <Label for=\"examplePassword\">\n                Пароль\n              </Label>\n              <Input\n                id=\"examplePassword\"\n                name=\"password\"\n                placeholder=\"Ваш пароль\"\n                type=\"password\"\n              />\n            </FormGroup>\n            <Button id=\"login\" >\n              <a href='/canvas'>Войти</a>\n            </Button>\n          </Form>\n        </div>\n        <Router>\n          <Routes>\n            <Route path='/canvas' element={<MyCanvas />} />\n          </Routes>\n        </Router> */}\n        <MyCanvas />\n      </div>\n    );\n};\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render( \n  <React.StrictMode >\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cnvs_bg\":\"MyCanvas_cnvs_bg__2NX2Q\",\"cnvs_fg\":\"MyCanvas_cnvs_fg__1pFzq\",\"cnvs_save\":\"MyCanvas_cnvs_save__1v4LH\",\"button\":\"MyCanvas_button__LSk_V\",\"button_form\":\"MyCanvas_button_form__3eI89\",\"container\":\"MyCanvas_container__1miQv\"};"],"sourceRoot":""}